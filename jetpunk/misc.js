!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=40)}([function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"translate",value:function(e){return window._translations?null!==e?_translations[e]||e:void 0:e}}])&&n(t.prototype,a),r&&n(t,r),e}();t.a=new r},function(e,t,a){"use strict";var n=a(2),r=a(0),o=a(6);function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chosen=function(e){var a=parseInt($(e.target).data("choice")),n=t.modals[0].callbacks.onChoice[a];t.close(),n&&n()},this.close=function(){var e=null;if(t.modals.length>0){var a=t.modals.shift();$("#modal-"+a.id).remove(),e=a.callbacks.onClose}t.draw(),e&&e()},this.modals=[],$("body").on("click",".alert-modal .close, .choice-modal .close",this.close),$("body").on("click",".choice-modal .choice",this.chosen)}var t,a,s;return t=e,(a=[{key:"draw",value:function(){if($(".modal").hide(),0==this.modals.length)$("#overlay-mask-new").hide();else{$("#overlay-mask-new").show();var e=this.modals[0];$("#modal-"+e.id).show(),setTimeout((function(){$("#modal-".concat(e.id," .auto-focus")).focus()}),100)}}},{key:"open",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.a.close(),this.modals.unshift({id:e,callbacks:a}),$("#overlay-new").append(t),this.draw()}},{key:"alert",value:function(e,t){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a=i.hideFooter?"":i.customFooter?'<div class="modal-footer">'.concat(r.a.translate(i.customFooter),"</div>"):'<div class="modal-footer"><button class="close blue auto-focus">'.concat(r.a.translate("Okay"),"</button></div>");var s=i.customClass||"",l=n.a.getUniqueId(),c='\n      <div id="modal-'.concat(l,'" class="modal alert-modal ').concat(s,'">\n        <div class="modal-content">\n          <div class="modal-header">\n            <div class="modal-title">').concat(r.a.translate(e),'</div>\n            <div class="close close-x" aria-label="Close">\n              <span aria-hidden="true">×</span>\n            </div>\n          </div>\n          <div class="modal-body">\n            ').concat(r.a.translate(t),"\n          </div>\n          ").concat(a,"\n        </div>\n      </div>");this.open(l,c,{onClose:o})}},{key:"loading",value:function(e){var t=n.a.getUniqueId(),a='\n      <div id="modal-'.concat(t,'" class="modal loading-modal">\n        <div class="modal-content">\n          <div class="modal-body">\n            <div class="msg">').concat(r.a.translate(e),'</div>\n            <div class="spinner"><i class="fa fa-spinner fa-spin fa-2x"></i></div>\n          </div>\n        </div>\n      </div>');this.open(t,a)}},{key:"choice",value:function(e,t,a,o){var i=n.a.getUniqueId(),s='\n      <div id="modal-'.concat(i,'" class="modal choice-modal">\n        <div class="modal-content">\n          <div class="modal-header">\n            <div class="modal-title">').concat(r.a.translate(e),'</div>\n            <div class="close close-x" aria-label="Close">\n              <span aria-hidden="true">×</span>\n            </div>\n          </div>\n          <div class="modal-body">\n            ').concat(r.a.translate(t),'\n          </div>\n          <div class="modal-footer">\n            <button class="choice blue" data-choice="0">').concat(r.a.translate(a[0]),'</button>\n            <button class="choice blue" data-choice="1">').concat(r.a.translate(a[1]),"</button>\n          </div>\n        </div>\n      </div>");this.open(i,s,{onChoice:o})}}])&&i(t.prototype,a),s&&i(t,s),e}();t.a=new s},function(e,t,a){"use strict";a(0);function n(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw i}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i={"Á":"A","À":"A","Â":"A","Ä":"A","Ǎ":"A","Ă":"A","Ā":"A","Ã":"A","Å":"A","Ǻ":"A","Ą":"A","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ɓ":"B","Ć":"C","Ċ":"C","Ĉ":"C","Č":"C","Ç":"C","Ď":"D","Ḍ":"D","Đ":"D","Ɗ":"D","Ð":"D","É":"E","È":"E","Ė":"E","Ê":"E","Ë":"E","Ě":"E","Ĕ":"E","Ē":"E","Ę":"E","Ẹ":"E","Ǝ":"E","Ə":"E","Ɛ":"E","Ġ":"G","Ĝ":"G","Ǧ":"G","Ğ":"G","Ģ":"G","Ĥ":"H","Ḥ":"H","Ħ":"H",I:"I","Í":"I","Ì":"I","İ":"I","Î":"I","Ï":"I","Ǐ":"I","Ĭ":"I","Ī":"I","Ĩ":"I","Į":"I","Ị":"I","Ĳ":"IJ","Ĵ":"J","Ķ":"K","Ƙ":"K","Ĺ":"L","Ļ":"L","Ł":"L","Ľ":"L","Ŀ":"L","ʼN":"N","Ń":"N","N̈":"N","Ň":"N","Ñ":"N","Ņ":"N","Ó":"O","Ò":"O","Ô":"O","Ö":"O","Ǒ":"O","Ŏ":"O","Ō":"O","Õ":"O","Ő":"O","Ǫ":"O","Ọ":"O","Ø":"O","Ǿ":"O","Ơ":"O","Œ":"OE","Ŕ":"R","Ř":"R","Ŗ":"R","Ś":"S","Ŝ":"S","Š":"S","Ş":"S","Ș":"S","Ṣ":"S","ß":"SS","ẞ":"SS","Þ":"TH","þ":"TH","Ť":"T","Ţ":"T","Ṭ":"T","Ŧ":"T","Ț":"T","Ú":"U","Ù":"U","Û":"U","Ü":"U","Ǔ":"U","Ŭ":"U","Ū":"U","Ũ":"U","Ű":"U","Ů":"U","Ų":"U","Ụ":"U","Ư":"U","Ẃ":"W","Ẁ":"W","Ŵ":"W","Ẅ":"W","Ý":"Y","Ỳ":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ỹ":"Y","Ƴ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","ș":"S"},s="ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789",l=[{name:"arabic",code:"ar",native:"اَلْعَرَبِيَّةُ‎",points:!1,all:"",recent:"",translated:!0},{name:"bulgarian",code:"bg",native:"български",points:!1,all:"",recent:"",translated:!1},{name:"chinese",code:"cn",native:"简体中文",points:!1,all:"",recent:"",translated:!1},{name:"croatian",code:"hr",native:"hrvatski",points:!1,all:"",recent:"",translated:!1},{name:"czech",code:"cz",native:"čeština",points:!1,all:"",recent:"",translated:!1},{name:"danish",code:"dk",native:"dansk",points:!1,all:"",recent:"",translated:!1},{name:"dutch",code:"nl",native:"nederlands",points:!0,all:"aanbevolen",recent:"recent",translated:!0},{name:"english",code:"en",native:"english",points:!0,all:"all",recent:"recent",translated:!1},{name:"finnish",code:"fi",native:"suomi",points:!0,all:"suositellut",recent:"viimeaikaiset",translated:!0},{name:"french",code:"fr",native:"français",points:!0,all:"propose",recent:"recent",translated:!0},{name:"german",code:"de",native:"deutsch",points:!0,all:"featured",recent:"aktuelle",translated:!0},{name:"greek",code:"el",native:"eλληνικά",points:!1,all:"",recent:"",translated:!1},{name:"hungarian",code:"hu",native:"magyar",points:!1,all:"",recent:"",translated:!1},{name:"italian",code:"it",native:"italiano",points:!0,all:"featured",recent:"recente",translated:!0},{name:"japanese",code:"jp",native:"日本語",points:!1,all:"",recent:"",translated:!1},{name:"norwegian",code:"no",native:"norsk",points:!1,all:"",recent:"",translated:!1},{name:"polish",code:"pl",native:"polski",points:!0,all:"wszystkie",recent:"ostatni",translated:!0},{name:"portuguese",code:"pt",native:"português",points:!0,all:"destacados",recent:"recente",translated:!0},{name:"russian",code:"ru",native:"русский",points:!1,all:"",recent:"",translated:!1},{name:"serbian",code:"sr",native:"српски",points:!1,all:"",recent:"",translated:!1},{name:"spanish",code:"es",native:"español",points:!0,all:"recomendado",recent:"reciente",translated:!0},{name:"swedish",code:"se",native:"svenska",points:!1,all:"",recent:"",translated:!1},{name:"turkish",code:"tr",native:"türkçe",points:!1,all:"",recent:"",translated:!1}],c=new RegExp(/{[^}]*}/),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"copyTextToClipboard",value:function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.focus(),t.select();var a=!1;try{a=document.execCommand("copy")}catch(e){}return document.body.removeChild(t),a}},{key:"capFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"randomInt",value:function(e,t){return e+Math.floor(Math.random()*(t-e))}},{key:"getRandomFromArray",value:function(e,t){for(var a=Object.assign([],e),n=[],r=0;r<t&&0!=a.length;r++){var o=Math.floor(Math.random()*a.length);n.push(a[o]),a.splice(o,1)}return n}},{key:"drawUnderlinedDisplay",value:function(e){return this.hasBrackets(e)?e.replace(/{([^}]*)}/g,'<span class="underline">$1</span>'):e}},{key:"stripLineBreak",value:function(e){return e.replace(/<BR[^>]*>/gi," ")}},{key:"breakArray",value:function(e,t){for(var a=[],n=e.length,r=0;r<t;r++){var o=Math.ceil((n-r)/t);a[r]=e.splice(0,o)}return a}},{key:"isPointsLanguage",value:function(e){var t,a=n(l);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.name==e&&r.points)return!0}}catch(e){a.e(e)}finally{a.f()}return!1}},{key:"escapeQuotes",value:function(e){return e.replace(/"/g,"&quot;")}},{key:"getLanguages",value:function(){return l}},{key:"getPointsLanguageObjects",value:function(){return l.filter((function(e){return e.points}))}},{key:"getPointsLanguages",value:function(){return this.getPointsLanguageObjects().map((function(e){return e.name}))}},{key:"getTranslatedAndEnglishObjects",value:function(){return l.filter((function(e){return e.translated||"english"==e.name}))}},{key:"getTranslatedLanguageObjects",value:function(){return l.filter((function(e){return e.translated}))}},{key:"getTranslatedLanguages",value:function(){return l.filter((function(e){return e.translated})).map((function(e){return e.name}))}},{key:"secondsToClock",value:function(e){var t=Math.floor(e/60);return(e%=60)<10&&(e="0"+e),t+":"+e}},{key:"timeToSeconds",value:function(e){var t=e.match(/^([0-9]+):([0-9]+)/);return null==t?null:60*parseInt(t[1])+parseInt(t[2])}},{key:"hasBrackets",value:function(e){return c.test(e)}},{key:"stripTags",value:function(e){return e.replace(/<[^>]*>/g,"")}},{key:"getStrippedBracketedText",value:function(e){return e=this.stripTags(e),this.getBracketedText(e)}},{key:"getBracketedText",value:function(e){var t=e.match(/{[^}]*}/g);return null==t?e:t.join(" ").replace(/[{}]/g,"")}},{key:"isNameSuffix",value:function(e){return e.replace(/[^0-9]/g,"")==e||nameSuffixes.indexOf(e)>=0}},{key:"getAnswerList",value:function(e){var t,a=[],r=n(e.answerOrder);try{for(r.s();!(t=r.n()).done;){var o=t.value;a.push(e.answers[o])}}catch(e){r.e(e)}finally{r.f()}return a}},{key:"getActiveAnswerList",value:function(e){var t,a=[],r=n(e.answerOrder);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=e.answers[o];"ts"==e.whatkind?i.display=i.text:"mc"==e.whatkind&&(i.display=null!=i.text?i.text:""),""!=i.display.trim()&&a.push(i)}}catch(e){r.e(e)}finally{r.f()}return a}},{key:"getActivePhotoAnswers",value:function(e){var t=this.getActiveAnswerList(e);return t=t.filter((function(e){return null!=e.image}))}},{key:"normalizeString",value:function(e){return e=(e=this.stripTags(e)).toUpperCase(),e=(e=this.replaceForeign(e)).replace(/[^A-Z0-9]/g,"")}},{key:"normalizeWords",value:function(e){return e=(e=this.stripTags(e)).toUpperCase(),e=(e=(e=(e=(e=this.replaceForeign(e)).replace(/['.,/]/g,"")).replace(/[^A-Z0-9 ]/g," ")).replace(/[ ]+/g," ")).trim()}},{key:"urlify",value:function(e){return this.normalizeWords(e).toLowerCase().replace(/[ ]/g,"-")}},{key:"replaceForeign",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(i[n]||n)}return t.join("")}},{key:"getQuizUrl",value:function(e,t){return 1==e?"/quizzes/".concat(t):"/user-quizzes/".concat(e,"/").concat(t)}},{key:"getUniqueIdArray",value:function(e){for(var t=[],a=0;a<e;a++)t.push(this.getUniqueId());return t}},{key:"getUniqueId",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=[],a=0;a<e;a++){var n=Math.floor(Math.random()*s.length);t.push(s[n])}return t.join("")}},{key:"classNames",value:function(e){var t=[];for(var a in e)e[a]&&t.push(a);return t.join(" ")}},{key:"constrainRange",value:function(e,t,a){return e<t?t:e>a?a:e}},{key:"rangeLoop",value:function(e,t){return e<0?t-1:e>=t?0:e}},{key:"getImageUrl",value:function(e,t){var a=e.fn.substring(0,2);return"/img/user-photo-library/".concat(a,"/").concat(e.fn,"-").concat(t,".").concat(e.ext)}},{key:"getColWidth",value:function(e){return 3==e?235:4==e?175:135}},{key:"constrainImageSize",value:function(e,t,a){if(e>t){if(e>a)return{h:a,w:Math.round(a*t/e)}}else if(t>a)return{h:Math.round(a*e/t),w:a};return{h:e,w:t}}},{key:"svgAddClass",value:function(e,t){$(e).addClass(t)}},{key:"svgRemoveClass",value:function(e,t){$(e).removeClass(t)}},{key:"arrayUnique",value:function(e){for(var t=[],a={},n=0;n<e.length;n++){var r=e[n];a[r]||(a[r]=!0,t.push(r))}return t}},{key:"getMaxUserLevel",value:function(e){var t=1;for(var a in e)e[a].level>t&&(t=e[a].level);return t}},{key:"convertObjectToArray",value:function(e){var t=[];for(var a in e)t.push(e[a]);return t}},{key:"isQuizmaster",value:function(e){return!!e.user&&!![1,176412].includes(e.user.uid)}},{key:"isTrustedUser",value:function(e){var t=e.data.quiz||e.data.create.quiz;if(!e.user||!t)return!1;if(null!=t){if(61345==e.user.uid&&"french"==e.language&&(!t.searchlevel||1==t.searchlevel))return!0;if(234916==e.user.uid&&"dutch"==e.language&&(!t.searchlevel||1==t.searchlevel))return!0;if(24141==e.user.uid&&"german"==e.language&&(!t.searchlevel||1==t.searchlevel))return!0;if(272526==e.user.uid&&"german"==e.language&&(!t.searchlevel||1==t.searchlevel))return!0;if(!(180029!=e.user.uid&&238457!=e.user.uid||"polish"!=e.language||t.searchlevel&&1!=t.searchlevel))return!0}return!1}},{key:"getLangProp",value:function(e,t){var a,r=n(l);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.name==e&&o.points)return o[t]}}catch(e){r.e(e)}finally{r.f()}return"en"}}])&&o(t.prototype,a),r&&o(t,r),e}();t.a=new u},function(e,t,a){"use strict";var n=a(1);function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,o;return t=e,(a=[{key:"err",value:function(e,t){e||(e="An unknown error occurred"),n.a.close(),t?t(e):n.a.alert("Error",e)}},{key:"go",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.url,r=t.data,o=t.callback||null,i=t.timeout||5e3,s=t.type||"POST",l=t.timeoutMsg||"Timeout",c=t.errCallback||null;"DONOTLOAD"!==t.loading&&n.a.loading(t.loading||"Loading ...");var u={type:s,url:a,data:r,timeout:i,success:function(a){var r;try{r=JSON.parse(a)}catch(t){return void e.err("An unknown error occurred",c)}r.success?("DONOTLOAD"!==t.loading&&n.a.close(),o&&o(r.obj)):e.err(r.err,c)},error:function(t,a){var n="timeout"==a?l:"An unknown error occurred";e.err(n,c)}};t.fileUpload&&(u.processData=!1,u.contentType=!1),$.ajax(u)}}])&&r(t.prototype,a),o&&r(t,o),e}();t.a=new o},,,function(e,t,a){"use strict";a(0),a(2);function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.linkClicked=function(e){var t=$(e.target).closest(".nav-dropdown-link"),n=$(t).data("dropdown"),r=$(t).position().left-$(".brand").position().left+25;"admin-dropdown"==n&&(r=r-$("#"+n).width()-50),a.open(n,r)},this.checkClose=function(e){0===$(e.target).closest(".nav-dropdown").length&&0===$(e.target).closest(".nav-dropdown-link").length&&a.close()},this.page=t,this.callback=null,this.openId=null,$(".nav-dropdown-link").on("click",this.linkClicked)}var t,a,r;return t=e,(a=[{key:"open",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.openId;null!==n&&this.close(),n!=e&&($("#"+e).show(),"user-dropdown"!=e&&$("#"+e).css("left",t),$(document).on("mouseup",this.checkClose),this.callback=a,this.openId=e)}},{key:"close",value:function(){$(".nav-dropdown").hide(),$(document).off("mouseup",this.checkClose),this.callback&&this.callback(),this.openId=null}}])&&n(t.prototype,a),r&&n(t,r),e}();t.a=new r},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(2),r=a(0);function o(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=["English"],c=function(){function e(t,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.toggleOptions=function(){$(".st-options-hidden").is(":visible")?$(".st-options-hidden").css("height","41px").animate({height:0},250,"swing",(function(e){$(".st-options-hidden").hide()})):$(".st-options-hidden").css("height",0).show().animate({height:"41px"},250)},this.openRandomLink=function(){var e=$(".super-table tr:visible a"),t=Math.floor(Math.random()*e.length);window.open(e[t].href,"_blank")},this.filterAndSearchRows=function(){$(".st-none-found").hide();var e=$(".st-sel-filter-value").val(),t=$(".st-search-table").val().split(" ").filter((function(e){return e.length>0})),a=$(".super-table-container .super-table tr:not(:first-child)");if("all"!=e||0!=t.length){if(null==e||"all"==e)if(1==t.length){var n=t[0].toLowerCase();for(o=0;o<a.length;o++)a[o].hidden=!a[o].textContent.toLowerCase().includes(n)}else for(n=new RegExp(t.map((function(e){return"(?=.*"+e+")"})).join(""),"gi"),o=0;o<a.length;o++)a[o].hidden=!n.test(a[o].textContent);else if(0==t.length)for(o=0;o<a.length;o++)a[o].hidden=a[o].dataset[i.selectedProp]!=e;else for(n=new RegExp(t.map((function(e){return"(?=.*"+e+")"})).join(""),"gi"),o=0;o<a.length;o++)a[o].hidden=!(a[o].dataset[i.selectedProp]==e&&n.test(a[o].textContent));var r=$(".super-table tr:visible").length-1;$(".st-row-count").html(r),0==r&&$(".st-none-found").show()}else{for(var o=0;o<a.length;o++)a[o].hidden=!1;$(".st-row-count").html(a.length)}},this.selectProp=function(){var e=i.selectedProp;if(i.selectedProp=$(".st-sel-filter").val(),"none"==i.selectedProp||null==i.propValues[i.selectedProp])return $(".st-sel-filter-value").html(""),$(".st-sel-filter-value").prop("disabled","disabled"),$(".super-table-container .super-table tr").prop("hidden",""),$(".st-row-count").html($(".super-table tr").length-1),void i.filterAndSearchRows();var t,a=[],s={},c=o(i.propValues[i.selectedProp]);try{for(c.s();!(t=c.n()).done;){var u=t.value,d=l.includes(u)?u:r.a.translate(u);a.includes(d)||(a.push(d),s[d]=u)}}catch(e){c.e(e)}finally{c.f()}a[0].match(/[0-9]/)?a.sort((function(e,t){return parseFloat(e.replace(/^([0-9.])[^0-9.]/,"$1"))>parseFloat(t.replace(/^([0-9.])[^0-9.]/,"$1"))?1:-1})):a.sort((function(e,t){return n.a.normalizeWords(e)>n.a.normalizeWords(t)?1:-1}));for(var h=["<option select value='all'>"+r.a.translate("All")+"</option>"],f=0,p=a;f<p.length;f++){u=p[f];h.push('<option value="'+s[u]+'">'+u+"</option>")}$(".st-sel-filter-value").prop("disabled",""),$(".st-sel-filter-value").html(h.join("")),e!=i.selectedProp&&i.filterAndSearchRows()},this.sortRows=function(e){var t=$(e.target).closest("th").data("i");$(".super-table th i.fa-chevron-up, .super-table th i.fa-chevron-down").remove(),i.sortCol!=t?(i.sortCol=t,i.sortDir=-1):i.sortDir*=-1;var a=$(".super-table tr:not(:first-child)").remove();a.sort((function(e,a){var r=e.children[i.sortCol],o=r.textContent,s=a.children[i.sortCol],l=s.textContent;return 2==i.colTypes[t]?(i.europeanNumbers&&(o=o.replace(/[\. ]/g,"").replace(/,/g,"."),l=l.replace(/[\. ]/g,"").replace(/,/g,".")),o=parseFloat(o.replace(/,/g,"")),l=parseFloat(l.replace(/,/g,"")),isNaN(o)&&(o=1e4*i.sortDir+r.textContent.length),isNaN(l)&&(l=1e4*i.sortDir+s.textContent.length)):3==i.colTypes[t]?(o=new Date($(e).data("date")),l=new Date($(a).data("date"))):4==i.colTypes[t]?(o=n.a.timeToSeconds(o),l=n.a.timeToSeconds(l)):(o=n.a.normalizeWords(o),l=n.a.normalizeWords(l)),o==l?e.rowIndex<a.rowIndex?-1:1:null==o?1:null==l?-1:o>l?i.sortDir:-1*i.sortDir})),$(".super-table").append(a),i.sortCarets()},this.page=t,this.data=a,this.colTypes=a.colTypes,this.sortCol=a.initCol,this.sortDir=a.initDir,this.props=a.props,this.propValues=a.propValues,this.selectedProp="all",this.europeanNumbers=null==t.language||!["arabic","croatian","english","other","japanese"].includes(t.language),$(".super-table-container").on("click",".st-options-button",this.toggleOptions),$(".super-table-container").on("click",".st-random-button",this.openRandomLink),$(".super-table-container").on("input",".st-search-table",this.filterAndSearchRows),$(".super-table-container").on("change",".st-sel-filter",this.selectProp),$(".super-table-container").on("change",".st-sel-filter-value",this.filterAndSearchRows),$(".super-table-container").on("click","th",this.sortRows)}var t,a,i;return t=e,(a=[{key:"sortCarets",value:function(){var e=$(".super-table th:eq(".concat(this.sortCol,")"));-1==this.sortDir?$(e).append('<i class="fa fa-chevron-down"></i>'):$(e).append('<i class="fa fa-chevron-up"></i>')}}])&&s(t.prototype,a),i&&s(t,i),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return I}));var n=a(0),r=a(1),o=a(3),i=a(2);function s(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.openReportModal=function(e){if(null!=a.page.user){a.reportedId=a.getCommentId(e);var t="\n      <p>".concat(n.a.translate("Report insults, vulgar language, and spam."),"</p>\n      <p>").concat(n.a.translate("This is not a disagree button."),"</p>"),o='<button id="submit-comment-report" class="red">'.concat(n.a.translate("Report"),"</button>");r.a.alert(n.a.translate("Report Comment"),t,null,{customFooter:o})}else a.page.showAskCreate()},this.openBlockModal=function(e){if(null!=a.page.user){a.blockedId=a.getCommentId(e);var t=$(e.target).closest(".comment").find(".sn").text();r.a.alert("Block "+t,"<p>Block this user from commenting on your quizzes or blogs?</p><p>This cannot be undone.</p>",null,{customFooter:'<button id="submit-comment-block" class="red">Block</button>'})}else a.page.showAskCreate()},this.openCommentsModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(null!=a.page.user){var o=i.a.getMaxUserLevel(a.page.user.pointsObj);if(o<15&&a.owner!==a.page.user.uid)r.a.alert("Sorry","You must be at <a href='/explain-points'>Level 15</a> to comment, except on your own quizzes");else{var s=n.a.translate("Post Your Comment"),l=n.a.translate("Insults, vulgar language, and spam are strictly forbidden"),c=a.text,u="";if(-1!==t){var d=$("#comment"+t),h=a.getMinuteDifference(d);if($(d).hasClass("sticky")&&(u="checked"),h>=60&&!i.a.isQuizmaster(a.page))return void r.a.alert("Expired","The time to edit this comment has expired");var f=i.a.isQuizmaster(a.page)?"∞":60-h;c=$(d).find(".text").html().replace(/<\/p><p>/gi,"\n").replace(/<p>/gi,"").replace(/<\/p>/gi,""),s=n.a.translate("Edit Your Comment"),l=n.a.translate("You can edit this comment for the next")+" "+f+" "+n.a.translate("minutes"),a.text=c}var p="",g="";a.showQm&&o>=30&&-1==t&&(p='\n      <div class="checkbox-holder">\n        <div class="checkbox">\n          <input type="checkbox" id="chkForQuizmaster"/>\n          <label for="chkForQuizmaster"></label>\n        </div>\n        <div class="checkbox-text">'.concat(n.a.translate("This comment contains a correction or suggestion for the Quizmaster"),"</div>\n      </div>")),!i.a.isQuizmaster(a.page)&&a.owner!==a.page.user.uid||-1!=e||(g='\n      <div class="checkbox-holder">\n        <div class="checkbox">\n          <input type="checkbox" id="chkSticky" '.concat(u,'/>\n          <label for="chkSticky"></label>\n        </div>\n        <div class="checkbox-text">Sticky</div>\n      </div>')),a.replyTo=e,a.editComment=t;var v='\n      <div class="blurb">'.concat(l,'</div>\n      <textarea class="form-control txt-comment auto-focus">').concat(c,'</textarea>\n      <div><span class="char-remaining">1000</span> ').concat(n.a.translate("characters remaining"),"</div>\n      ").concat(p,"\n      ").concat(g),m='<button id="submit-comment" class="blue">'.concat(n.a.translate("Submit Comment"),"</button>");r.a.alert(s,v,null,{customFooter:m,customClass:"comments-modal"})}}else a.page.showAskCreate()},this.clickReply=function(e){var t=a.getCommentId(e);if($("#comment"+t).hasClass("d2")){var n,r="comment"+t,o=null,i=s($("#comments-container .comment"));try{for(i.s();!(n=i.n()).done;){var l=n.value;if($(l).hasClass("d1"))o=l;else if(l.id==r&&null!==o)return t=parseInt(o.id.replace("comment","")),void a.openCommentsModal(t)}}catch(e){i.e(e)}finally{i.f()}}a.openCommentsModal(t)},this.clickEdit=function(e){var t=a.getCommentId(e),n=$("#comment"+t).hasClass("d1")||$("#comment"+t).hasClass("d2")?-2:-1;a.openCommentsModal(n,t)},this.drawCharRemaining=function(){a.text=$(".txt-comment").val(),a.text.length>1e3&&(a.text=a.text.substring(0,1e3),$(".txt-comment").val(a.text)),$(".char-remaining").html(1e3-a.text.length)},this.submitComment=function(){if(""!=a.text){var e=$("#chkForQuizmaster").prop("checked")?1:0,t=$("#chkSticky").prop("checked")?1:0;o.a.go({url:"/api/post-comment.php",data:{text:a.text,quiz:a.quizId,reply:a.replyTo,pageUrl:a.pageUrl,forQuizmaster:e,sticky:t,editComment:a.editComment,owner:a.owner,language:a.page.language},loading:"Posting comment",callback:function(e){if(a.text="",r.a.close(),e.allowed){var t=$(".comments-outer").parent();$(".comments-outer").remove(),$(t).append(e.html)}$(".comments").show(),$(".txt-comment").val(""),a.init(),e.allowed||r.a.alert("Comment submitted","It will appear pending moderation")}})}else r.a.alert("Error","Please enter a comment")},this.openDeleteModal=function(e){var t=a.getCommentId(e),o=n.a.translate("Are you sure you want to delete this comment?"),i='<button data-id="'.concat(t,'" id="submit-comment-delete" class="red">').concat(n.a.translate("Delete"),"</button>");r.a.alert("Delete Comment",o,null,{customFooter:i})},this.deleteComment=function(e){var t=$(e.target).data("id");o.a.go({url:"/api/delete-comment.php",data:{id:t},loading:"Deleting comment",callback:function(e){r.a.close(),$(".comments-outer").html(e),$(".comments").show(),a.init()}})},this.submitReport=function(){o.a.go({url:"/api/report-comment.php",data:{id:a.reportedId},loading:"Reporting comment",callback:function(e){r.a.close(),r.a.alert("Thank you","Your report has been submitted")}})},this.submitBlock=function(){o.a.go({url:"/api/block-user.php",data:{id:a.blockedId},loading:"Blocking user",callback:function(e){r.a.close(),r.a.alert("User Blocked","<p>This user has been blocked.</p><p>It may take up to 24 hours for this change to fully take effect.</p>"),$(".comments-outer").html(e),$(".comments").show(),a.init()}})},this.clickHeart=function(e){var t=a.page.user;if(null!=t){var n=a.getCommentId(e);if($("#comment"+n).find(".sn").text()!=t.screenname){var l=parseInt($("#comment"+n).find(".pts").html().replace("+",""));if(n in t.commentLikes)$("#comment"+n).find(".fa-heart").removeClass("fa").addClass("far"),delete t.commentLikes[n],l-=1;else{var c,u=-1,d=s(i.a.getPointsLanguages());try{for(d.s();!(c=d.n()).done;){var h=c.value,f=t.pointsObj[h].level;f>u&&(u=f)}}catch(e){d.e(e)}finally{d.f()}if(u<5)return void r.a.alert("Sorry","<p>You must reach Level 5 to like comments.</p><p>Take a few more quizzes!</p>");$("#comment"+n).find(".fa-heart").removeClass("far").addClass("fa"),t.commentLikes[n]=1,l+=1}$("#comment"+n).find(".pts").html("+"+l),o.a.go({url:"/api/like-comment.php",data:{comment:n},loading:"DONOTLOAD",success:function(e){},errCallback:function(e){$("#comment"+n).find(".pts").html("+"+(l-1)),$("#comment"+n).find(".fa-heart").removeClass("fa").addClass("far"),r.a.alert("Error",e,(function(){return location.reload()}))}})}else r.a.alert("Can't Unlike","Don't like your own comment? Maybe you should delete it.")}else a.page.showAskCreate()},this.loadAll=function(){o.a.go({url:"/api/load-all-comments.php",data:{quiz:a.quizId,pageUrl:a.pageUrl},loading:"Loading all comments",callback:function(e){$(".comments-outer").html(e),$(".comments").show(),a.init()}})},this.page=t,this.quiz=t.data.quiz||null,this.pageUrl=location.pathname.toLowerCase().replace(/\/$/,""),this.quizId=-1,this.quiz?(this.owner=this.quiz.user,this.quizId=this.quiz.id,this.showQm=1==this.quiz.searchlevel):this.page.data.blogOwner?(this.owner=this.page.data.blogOwner,this.showQm=1==this.owner):this.page.data.group?(this.owner=this.page.data.group.owner,this.showQm=!1):(this.owner=176412,this.showQm=!0),this.text="",this.init(),$("body").on("click",".add-comment",(function(){return a.openCommentsModal()})),$("body").on("input",".txt-comment",this.drawCharRemaining),$("body").on("click","#submit-comment",this.submitComment),$("body").on("click","#submit-comment-report",this.submitReport),$("body").on("click","#submit-comment-block",this.submitBlock),$("body").on("click","#submit-comment-delete",this.deleteComment),$("body").on("click",".comments-outer .show-comments",(function(){return $(".comments").toggle()})),$("body").on("click",".comments-outer .reply",this.clickReply),$("body").on("click",".comments-outer .edit",this.clickEdit),$("body").on("click",".comments-outer .del",this.openDeleteModal),$("body").on("click",".comments-outer .report",this.openReportModal),$("body").on("click",".comments-outer .block",this.openBlockModal),$("body").on("click",".comments-outer .comment .th",this.clickHeart),$("body").on("click",".comments-outer .load-all-comments",this.loadAll)}var t,a,l;return t=e,(a=[{key:"getMinuteDifference",value:function(e){var t=(new Date).getTime(),a=1e3*parseInt($(e).data("utc"));return Math.floor((t-a)/6e4)}},{key:"init",value:function(){var e=this.page.user;null==e&&(e={screenname:"",uid:-1,commentLikes:[]});var t,a=s(Object.assign([],$(".comments .comment")));try{for(a.s();!(t=a.n()).done;){var r=t.value,o=this.getMinuteDifference(r),l=[],c=$(r).find(".sn").text(),u=i.a.isQuizmaster(this.page)?1e9:60;(c==e.screenname||i.a.isQuizmaster(this.page)||-1==this.quizId&&this.owner==e.uid)&&l.push('<span class="del">'+n.a.translate("delete")+"</span>"),c!=e.screenname&&l.push('<span class="report">'+n.a.translate("report")+"</span>"),c!=e.screenname&&this.owner==e.uid&&l.push('<span class="block">'+n.a.translate("block")+"</span>"),c==e.screenname&&o<u&&l.push('<span class="edit">'+n.a.translate("edit")+"</span>"),$(r).hasClass("d2")&&$("#"+r.id+"+.d2").length>0||$(r).hasClass("sticky")||l.push('<span class="reply">'+n.a.translate("reply")+"</span>");var d=parseInt(r.id.replace("comment",""))in e.commentLikes||c==e.screenname?"fa":"far";$(r).find(".th").html('<i class="'.concat(d,' fa-heart"></i>')),$(r).find(".bottom-line").html(l.join(""))}}catch(e){a.e(e)}finally{a.f()}}},{key:"getCommentId",value:function(e){var t=$(e.target).closest(".comment")[0].id;return t=parseInt(t.replace("comment",""))}}])&&c(t.prototype,a),l&&c(t,l),e}();function d(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.launchLogin=function(){$(".modal").hide(),$("#overlay-mask-new").show(),$("#login-modal").length?$("#login-modal").show():$("#overlay-new").append(a.drawLogin())},this.login=function(){var e=$("#login-modal .txt-email").val().replace(/[ ]/g,""),t=$("#login-modal .txt-password").val().trim();o.a.go({url:"/api/login.php",data:{username:e,password:t,quiz:a.page.data.quizId,creator:a.page.data.subscribeUser,pageurl:window.location.pathname},loading:"Logging In",callback:function(e){a.page.setUser(e),a.close(),r.a.close(),r.a.alert("".concat(n.a.translate("Welcome")," ").concat(e.screenname),"".concat(n.a.translate("You are now logged in.")))},errCallback:function(e){r.a.alert("Error Logging In",e,a.launchLogin)}})},this.launchCreate=function(){$(".modal").hide(),$("#overlay-mask-new").show(),$("#create-account").length?$("#create-account").show():$("#overlay-new").append(a.drawCreate())},this.drawCreate=function(){var e=Object.assign([],i.a.getTranslatedAndEnglishObjects());e.sort((function(e,t){return e.native.localeCompare(t.native)}));var t,r=[],o=d(e);try{for(o.s();!(t=o.n()).done;){var s=t.value,l=s.name==a.page.language?"selected":"",c=i.a.capFirstLetter(s.native);r.push("<option ".concat(l,' value="').concat(s.name,'">').concat(c,"</option>"))}}catch(e){o.e(e)}finally{o.f()}r=r.join("");var u="";return"english"==a.page.language&&(u='\n      <div class="row">\n        <div class="checkbox-row">\n          <div class="checkbox">\n            <input type="checkbox" id="chk-quiz-mail" />\n            <label for="chk-quiz-mail"></label>\n          </div>\n          <div>Weekly e-mails about new quizzes?</div>\n        </div>\n      </div>'),'\n      <div id="create-account" class="modal login-modal modal-350">\n        <div class="modal-content">\n          <div class="modal-header">\n            <div class="modal-title">'.concat(n.a.translate("Create Account"),'</div>\n            <div class="close close-x" aria-label="Close">\n              <span aria-hidden="true">×</span>\n            </div>\n          </div>\n          <div class="modal-body">\n            <div class="row">\n              <label>').concat(n.a.translate("Email Address"),':</label>\n              <input type="text" class="email full auto-focus" name="email">\n              <div class="create-error email-error"></div>\n            </div>\n            <div class="row">\n              <label>').concat(n.a.translate("Screen Name"),':</label>\n              <input type="text" class="screenname full" name="screenname">\n              <div class="create-error screenname-error"></div>\n            </div>\n            <div class="row">\n              <div class="password-row">\n                <div>\n                  <label>').concat(n.a.translate("Password"),':</label>\n                  <input type="password" class="password full" name="password">\n                </div>\n                <div>\n                  <label>').concat(n.a.translate("Confirm Password"),':</label>\n                  <input type="password" class="confirm full" name="confirm">\n                </div>\n              </div>\n              <div class="create-error password-error"></div>\n            </div>\n            <div class="row">\n              <label>').concat(n.a.translate("Language"),':</label>\n              <select class="lang full">').concat(r,"</select>\n            </div>\n            ").concat(u,'\n            <div class="row commit-button-row">\n              <button class="blue full btn-create">').concat(n.a.translate("Create Account"),'</button>\n            </div>\n            <div class="row two-button-row">\n              <button class="login-link">').concat(n.a.translate("Login"),'</button>\n              <button class="forgot-password-link">').concat(n.a.translate("Forgot Password"),"</button>\n            </div>\n          </div>\n        </div>\n      </div>")},this.getEmailError=function(e){if(0===e.length)return"E-mail can't be blank";if(e.length>64)return"E-mail can't be longer than 64 characters";return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?null:"Invalid e-mail address"},this.getUsernameError=function(e){return 0===e.length?"Screen name can't be blank":e.length>16?"Screen name can't be longer than 16 characters":e.match(/[^a-zA-Z0-9]/)?"Screen name may only contain letters and numbers":null},this.getPasswordError=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.trim()!=e?"Password can't start or end with a space":e.length<5?"Password must be at least 5 characters in length":(t.length>0||a)&&e!=t?"Your passwords don't match":null},this.typeCreate=function(e){var t=e.target.name;if("email"!=t)if("screenname"!=t){if("password"==t||"confirm"==t){var n=$("#create-account .password").val(),r=$("#create-account .confirm").val();a.drawCreateError(".password-error",a.getPasswordError(n,r,!1))}}else{var o=$("#create-account .screenname").val();a.drawCreateError(".screenname-error",a.getUsernameError(o))}else{var i=$("#create-account .email").val();a.drawCreateError(".email-error",a.getEmailError(i))}},this.createAccount=function(){var e=$("#create-account .email").val(),t=$("#create-account .screenname").val(),i=$("#create-account .password").val(),s=$("#create-account .confirm").val(),l=$("#create-account .lang").val(),c=$("#chk-quiz-mail").prop("checked")?1:0,u=a.getEmailError(e),d=a.getUsernameError(t),h=a.getPasswordError(i,s);a.drawCreateError(".email-error",u),a.drawCreateError(".screenname-error",d),a.drawCreateError(".password-error",h),null===u&&null===d&&null===h?o.a.go({url:"/api/create-user.php",data:{email:e,username:t,password:i,quizmail:c,language:l,quizId:a.page.data.quizId},loading:"Creating account",callback:function(e){a.page.setUser(e),a.close(),r.a.close(),r.a.alert(n.a.translate("Welcome")+" "+e.screenname,n.a.translate("Your account has been created."))},errCallback:function(e){r.a.alert("Error",e,a.launchCreate)}}):r.a.alert("Error","Please fix the errors marked in red",a.launchCreate)},this.launchForgot=function(){$(".modal").hide(),$("#overlay-mask-new").show(),$("#forgot-modal").length?$("#forgot-modal").show():$("#overlay-new").append(a.drawForgot())},this.sendForgot=function(){var e=$("#forgot-modal .email").val().trim();""!=e?o.a.go({url:"/api/send-forgot-password.php",data:{email:e},type:"POST",loading:"Sending e-mail...",callback:function(e){a.close(),r.a.alert("E-mail sent","We sent you an e-mail with a link to reset your password")},errCallback:function(e){r.a.alert("Error",e,a.launchForgot)}}):r.a.alert("Error","Please enter the e-mail address associated with your account",a.launchForgot)},this.page=t,$("body").on("click",".login-link",this.launchLogin),$("body").on("click","#login-modal .login-button",this.login),$("body").on("keydown","#login-modal .txt-password",(function(e){13==e.which&&a.login()})),$("body").on("click",".login-modal .close",this.close),$("body").on("click",".create-account-link",this.launchCreate),$("body").on("click","#create-account .btn-create",this.createAccount),$("body").on("input","#create-account input",this.typeCreate),$("body").on("click",".forgot-password-link",this.launchForgot),$("body").on("click","#forgot-modal .send-forgot",this.sendForgot)}var t,a,s;return t=e,(a=[{key:"close",value:function(){$(".login-modal").hide(),r.a.draw()}},{key:"drawLogin",value:function(){return'\n    <div id="login-modal" class="modal login-modal modal-300">\n      <div class="modal-content">\n        <div class="modal-header">\n          <div class="modal-title">'.concat(n.a.translate("Login to Your Account"),'</div>\n          <div class="close close-x" aria-label="Close">\n            <span aria-hidden="true">×</span>\n          </div>\n        </div>\n        <div class="modal-body">\n          <div class="row">\n            <label>').concat(n.a.translate("Screen name or Email"),':</label>\n            <input type="text" class="txt-email full auto-focus">\n          </div>\n          <div class="row">\n            <label>').concat(n.a.translate("Password"),':</label>\n            <input type="password" class="txt-password full">\n          </div>\n          <div class="row commit-button-row">\n            <button class="blue full login-button">Login</button>\n          </div>\n          <div class="row two-button-row">\n            <button class="create-account-link">').concat(n.a.translate("Create Account"),'</button>\n            <button class="forgot-password-link">').concat(n.a.translate("Forgot Password"),"</button>\n          </div>\n        </div>\n      </div>\n    </div>")}},{key:"drawCreateError",value:function(e,t){$("#create-account "+e).text(n.a.translate(t)).toggle(null!=t)}},{key:"drawForgot",value:function(){return'\n    <div id="forgot-modal" class="modal login-modal modal-300">\n      <div class="modal-content">\n        <div class="modal-header">\n          <div class="modal-title">'.concat(n.a.translate("Forgot Password"),'</div>\n          <div class="close close-x" aria-label="Close">\n            <span aria-hidden="true">×</span>\n          </div>\n        </div>\n        <div class="modal-body">\n          <div class="row">\n            ').concat(n.a.translate("We will send you an e-mail with a link to reset your password."),'\n          </div>\n          <div class="row">\n            <label>').concat(n.a.translate("Email Address"),':</label>\n            <input type="text" class="email full auto-focus">\n          </div>\n          <div class="row commit-button-row">\n            <button class="blue full send-forgot">').concat(n.a.translate("Send E-mail"),'</button>\n          </div>\n          <div class="row two-button-row">\n            <button class="login-link">').concat(n.a.translate("Login"),'</button>\n            <button class="create-account-link">').concat(n.a.translate("Create Account"),"</button>\n          </div>\n        </div>\n      </div>\n    </div>")}}])&&f(t.prototype,a),s&&f(t,s),e}();var g=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.openMobUserOptions=function(){var e=a.page.user,t=e.notifications,o=e.friendNotifications,s=e.screenname,l=e.url,c=e.numquizzes,u=e.uid,d=e.numblogs,h=i.a.isPointsLanguage(a.page.language)?a.page.language:"english",f=a.page.user.pointsObj[h].level,p=i.a.getLangProp(a.page.language,"code"),g="en"==p?"/user-stats":"/"+p+"/user-stats",v=a.page.data.liveLink,m=a.page.data.quiz,b=!1;["map-game","photo-game","text-game","mc-game","tile-game"].includes(a.page.pageType)&&(m.user==u||i.a.isQuizmaster(a.page))&&(b=!0);var y=!1;i.a.isQuizmaster(a.page)&&(b||v)&&(y=!0);var w=0==t?"":"(".concat(t,")"),k=0==t?"":'<i class="fa fa-bell"></i>',$=0==o?"":"(".concat(o,")"),C=0==o?"":'<i class="fa fa-bell"></i>',S='\n      <div class="item"><a href="/create-quiz">'.concat(n.a.translate("Create / Edit Quiz"),'</a></div>\n      <div class="item"><a href="/user-notifications">').concat(k," ").concat(n.a.translate("New Comments")," ").concat(w,'</a></div>\n      <div class="item"><a href="/friends">').concat(C," ").concat(n.a.translate("Friends and Groups")," ").concat($,"</a></div>\n    ");c>0&&(S+='\n        <div class="item"><a href="/user-quizzes/'.concat(u,'">').concat(n.a.translate("Your Live Quizzes"),'</a></div>\n        <div class="item"><a href="/user-analytics">').concat(n.a.translate("Your Quiz Analytics"),"</a></div>\n      "));var z="";b&&(z='\n        <div class="item"><a href="/create-quiz/'.concat(m.id,'">').concat(n.a.translate("Edit This Quiz"),'</a></div>\n        <div class="item"><a href="/user-analytics?quiz=').concat(m.id,'">').concat(n.a.translate("Analyze This Quiz"),"</a></div>\n      ")),y&&(z+='<div class="item"><a href="/admin/update-quiz.php?id='.concat(m.id,'">Update This Quiz</a></div>')),v&&(z+='\n        <div class="item"><a href="'.concat(v,'">').concat(n.a.translate("Live Version of This Quiz"),"</a></div>\n      ")),null!=a.page.data.blogId&&null!=a.page.data.blogOwner&&(a.page.data.blogOwner==u||i.a.isQuizmaster(a.page))&&(z+='<div class="item"><a href="/create-blog/'.concat(a.page.data.blogId,'">').concat(n.a.translate("Edit This Blog"),"</a></div>")),""!=z&&(z+='<div class="spacer"></div>');var x=0==d?"":'<div class="item"><a href="/users/'.concat(l,'/blog">').concat(n.a.translate("Your Blog"),"</a></div>"),T='\n      <div class="item"><a href="/your-account">'.concat(n.a.translate("Your Account"),'</a></div>\n      <div class="item"><a href="').concat(g,'">').concat(n.a.translate("Your Stats"),'</a></div>\n      <div class="item"><a href="/users/').concat(l,'">').concat(n.a.translate("Your Public Profile"),'</a></div>\n      <div class="item"><a href="/your-favorite-quizzes">').concat(n.a.translate("Your Favorite Quizzes"),'</a></div>\n      <div class="item"><a href="/user-subscriptions">').concat(n.a.translate("Your Subscriptions"),'</a></div>\n      <div class="spacer"></div>\n      <div class="item"><a href="/create-blog">').concat(n.a.translate("Create / Edit Blog"),'</a></div>\n      <div class="item"><a href="/blog-feed">').concat(n.a.translate("Your Blog Feed"),"</a></div>\n      ").concat(x,'\n      <div class="spacer"></div>\n      ').concat(S,'\n      <div class="spacer"></div>\n      ').concat(z,'\n      <div class="item"><a class="logout-link link-like">').concat(n.a.translate("Logout"),'</a></div>\n      <div class="badge-item item">\n        <div class="badge-left">').concat(n.a.translate("Your Level"),':</div>\n        <div class="badge-right">\n          <div class="badge"><img src="/img/large-badge.svg" height="50"></div>\n          <div class="level"><a href="').concat(g,'">').concat(f,"</a></div>\n        </div>\n      </div\n    ");r.a.alert(s,T,null,{customClass:"mob-links-modal",hideFooter:!0})},this.openMobNav=function(){var e=a.page.language,t="",o="",s="";"english"==a.page.language&&(t='\n        <div class="item"><a href="/tags/highest-rated">Highest-Rated Quizzes</a></div>\n        <div class="item"><a href="/nominated-quizzes">Nominated Quizzes</a></div>\n        <div class="item"><a href="/tags/index">Quizzes by Tag</a></div>\n      ',o='\n        <div class="item"><a href="/blog">JetPunk Blog</a></div>\n        <div class="item"><a href="/blog-tags">Blogs by Tag</a></div>\n        <div class="spacer"></div>\n        <div class="item"><a href="/badges">JetPunk Badges</a></div>\n      ',s='\n        <div class="item"><a href="/charts">Charts</a></div>\n        <div class="item"><a href="/info">Info Pages</a></div>\n        <div class="item"><a href="/interesting-facts">Interesting Facts</a></div>\n        <div class="item"><a href="/interesting-quotes">Interesting Quotes</a></div>\n        <div class="spacer"></div>\n      '),"french"==a.page.language&&(t='\n        <div class="item"><a href="https://www.jetpunk.com/fr/tags/tous">Quiz par tag</a></div>\n      ');var l="/new-and-reset-quizzes",c="/tags/all",u="/user-quizzes",d="/tags/recent-user",h="";if("english"!=(e=i.a.isPointsLanguage(a.page.language)?a.page.language:"english")){var f=i.a.getLangProp(e,"code");l="/"+f+"/new-and-reset-quizzes",c="/"+f+"/"+i.a.getLangProp(e,"all"),u="/"+f+"/all",d="/"+f+"/"+i.a.getLangProp(e,"recent"),h="/"+f}var p='\n      <div class="item"><a href="'.concat(c,'">').concat(n.a.translate("All Featured Quizzes"),'</a></div>\n      <div class="item"><a href="/quizzes/random?language=').concat(e,'">').concat(n.a.translate("Random"),'</a></div>\n      <div class="item"><a href="').concat(l,'">').concat(n.a.translate("New and Reset Quizzes"),'</a></div>\n      <div class="spacer"></div>\n      <div class="item"><a href="/create-quiz">').concat(n.a.translate("Create / Edit Quiz"),'</a></div>\n      <div class="spacer"></div>\n      <div class="item"><a href="').concat(d,'">').concat(n.a.translate("Recent User-Created"),'</a></div>\n      <div class="item"><a href="').concat(u,'">').concat(n.a.translate("All User-Created"),"</a></div>\n      ").concat(t,'\n      <div class="spacer"></div>\n      <div class="item"><a href="').concat(h,'/user-blogs">').concat(n.a.translate("User Blogs"),'</a></div>\n      <div class="item"><a href="').concat(h,'/recent-blogs">').concat(n.a.translate("Recent User Blogs"),"</a></div>\n      ").concat(o,'\n      <div class="item"><a href="/minigames">').concat(n.a.translate("JetPunk Minigames"),'</a></div>\n      <div class="spacer"></div>\n      ').concat(s,'\n      <div class="item"><a href="/about">').concat(n.a.translate("About Us"),'</a></div>\n      <div class="item"><a href="/contact">').concat(n.a.translate("Contact Us"),'</a></div>\n      <div class="item"><a href="/jetpunk-premium">').concat(n.a.translate("JetPunk Premium"),'</a></div>\n      <div class="item"><a href="/svg-guide">').concat(n.a.translate("JetPunk SVG Guide"),"</a></div>\n    ");r.a.alert(n.a.translate("Navigation"),p,null,{customClass:"mob-links-modal",hideFooter:!0})},this.page=t,$("#mob-nav").on("click",this.openMobNav),$("#mob-user-button").on("click",this.openMobUserOptions)},v=a(6);function m(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=a(12),k=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyDown=function(e){switch(e.which){case 9:e.shiftKey?a.moveCursor(-1):a.moveCursor(1);break;case 13:a.select();break;case 27:v.a.close();break;case 38:a.moveCursor(-1);break;case 40:a.moveCursor(1);break;default:return}e.preventDefault()},this.changeSearchLang=function(){var e,t=$("#sel-search-lang").val();e="all"==t?"*":i.a.getLangProp(t,"code"),$(".search-language").html(e),a.searchLanguage=t,$(".search-box").val("").focus(),"desktop"==a.page.device?r.a.close():$("#mob-search-results").hide()},this.openChooseLang=function(){var e=a.getSearchLangSelector();r.a.alert("Choose Search Language",e,null,{hideFooter:!0,customClass:"choose-search-lang"})},this.typeSearch=function(e){a.searchText=e.target.value;var t=a.getSearchTerm(a.searchText);t!=a.term&&(a.term=t,""==t?("desktop"==a.page.device&&v.a.close(),a.setLoading(!1)):(a.setLoading(!0),a.search(t))),""==t||a.loading||a.processResults()},this.search=function(e){$.ajax({type:"POST",url:"/api/search.php",data:{term:e,language:a.searchLanguage},success:function(t){var n;try{n=JSON.parse(t)}catch(e){return}e==a.term&&(a.setLoading(!1),a.results=n,a.processResults())}})},this.clickMobSearch=function(){var e=a.getSearchLangSelector(),t='\n      <div class="top-line">\n        <div class="search-holder">\n          <input type="text" class="search-box" placeholder="'.concat(n.a.translate("Search"),'">\n          <div class="search-loading"><i class="fa fa-circle-notch fa-spin"></i></div>\n        </div>\n        <div class="select-holder">\n          ').concat(e,'\n        </div>\n      </div>\n      <div id="mob-search-results"></div>\n    ');r.a.alert("Search",t,null,{hideFooter:!0,customClass:"mob-search-modal"})},this.page=t,this.searchText="",this.loading=!1,this.results=null,this.selectedIdx=-1,this.term="",this.dropdownItems=[],this.searchLanguage=i.a.isPointsLanguage(this.page.language)?this.page.language:"all",$("body").on("input",".search-box",this.typeSearch),$("body").on("click",".search-box",this.typeSearch),$("#mob-search").on("click",this.clickMobSearch),$(".search-language").on("click",this.openChooseLang),$("body").on("change","#sel-search-lang",this.changeSearchLang)}var t,a,o;return t=e,(a=[{key:"select",value:function(){if(-1!=this.selectedIdx){var e=$("#search-row-".concat(this.selectedIdx)).data("url");window.location=e}}},{key:"moveCursor",value:function(e){$(".search-row").removeClass("selected");for(var t=this.selectedIdx,a=0;a<this.dropdownItems.length;a++)if((t+=e)>=this.dropdownItems.length&&(t=0),t<0&&(t=this.dropdownItems.length-1),this.dropdownItems[t].canSelect)return $("#search-row-"+t).addClass("selected"),void(this.selectedIdx=t)}},{key:"getSearchLangSelector",value:function(){var e=i.a.getPointsLanguageObjects();e.sort((function(e,t){return e.native>t.native?1:-1})),e.unshift({name:"all",native:"all"});var t,a=[],n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.name==this.searchLanguage?"selected":"";a.push("<option ".concat(o,' value="').concat(r.name,'">').concat(i.a.capFirstLetter(r.native),"</option>"))}}catch(e){n.e(e)}finally{n.f()}return'\n      <select id="sel-search-lang">\n        '.concat(a.join(""),"\n      </select>")}},{key:"setLoading",value:function(e){this.loading=e,$(".search-loading").toggle(e)}},{key:"getSearchTerm",value:function(e){"french"==this.searchLanguage&&(e=e.replace("'"," "));var t=(e=i.a.normalizeWords(e)).indexOf(" ");return 1==t?e[0]:2==t?e.substring(0,2):e.length>=3?e.substring(0,3):""}},{key:"getSearchWords",value:function(e){return"french"==this.searchLanguage&&(e=e.replace("'"," ")),(e=i.a.normalizeWords(e)).split(" ")}},{key:"addDropdownItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.dropdownItems.length,o='<div data-url="'.concat(t,'" id="search-row-').concat(r,'" class="search-row ').concat(a,'">').concat(e,"</div>");""!=t&&(o='<a href="'.concat(t,'">').concat(o,"</a>")),this.dropdownItems.push({html:o,canSelect:n})}},{key:"processResults",value:function(){this.dropdownItems=[];var e=[],t=this.getSearchWords(this.searchText);t=this.processIgnoredWords(t);for(var a=0;a<this.results.quizzes.length;a++){var r=this.results.quizzes[a];this.wordsMatch(t,this.getSearchWords(r.t))&&e.push(r)}for(this.addDropdownItem(n.a.translate("Quizzes"),"","search-result-header"),a=0;a<e.length&&a<12;a++){var o=(r=e[a]).t;1==r.sl&&(o='<i class="fa fa-star"></i> '.concat(o)),this.addDropdownItem(o,i.a.getQuizUrl(r.u,r.f),"",!0)}0==e.length&&this.addDropdownItem(n.a.translate("None found")),e.length>12&&this.addDropdownItem(n.a.translate("More results ..."),"/search?term="+encodeURIComponent(this.searchText)+"&language="+this.searchLanguage,"",!0),this.addDropdownItem(n.a.translate("Search with Google ..."),"https://cse.google.com/cse?cx=013202234982266782837:zgxwxio0ici&ie=UTF-8&q="+encodeURIComponent(this.searchText)+"&sa=Search","",!0);var s=[];for(a=0;a<this.results.users.length;a++){var l=this.results.users[a];1==t.length&&0==i.a.normalizeString(l.screenname).indexOf(t[0])&&s.push(l)}if(s.length>0)for(this.addDropdownItem(n.a.translate("Users"),"","search-result-header"),a=0;a<s.length&&a<3;a++){l=s[a];var c=parseInt(l.timestaken).toLocaleString();o="\n          <div>".concat(l.screenname,"</div>\n          <div>").concat(c,"</div>"),this.addDropdownItem(o,"/user-quizzes/".concat(l.uid),"user-row",!0)}var u=[];for(a=0;a<this.results.tags.length;a++){var d=this.results.tags[a];this.wordsMatch(t,this.getSearchWords(d.dirname))&&u.push(d)}if(u.length>0)for(this.addDropdownItem("Tags","","search-result-header"),a=0;a<u.length&&a<5;a++){d=u[a];var h="french"==this.searchLanguage?"/fr":"";this.addDropdownItem(d.dirname,"".concat(h,"/tags/").concat(d.urlname),"",!0)}if(this.drawDropdown(),"desktop"==this.page.device&&!v.a.openId){var f=$(".search-holder").position().left-$(".brand").position().left+25;v.a.open("search-dropdown",f,this.onClose),$(document).on("keydown",this.keyDown),this.selectedIdx=-1}}},{key:"drawDropdown",value:function(){var e=this.dropdownItems.map((function(e){return e.html}));"desktop"==this.page.device?$("#search-dropdown .search-content").html(e.join("")):$("#mob-search-results").html(e.join("")).show()}},{key:"onClose",value:function(){$(document).off("keydown",this.keyDown)}},{key:"processIgnoredWords",value:function(e){var t,a=[],n=["THE","OF","AND","QUIZ"],r=m(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.indexOf(o)<0&&a.push(o)}}catch(e){r.e(e)}finally{r.f()}return 0==a.length&&a.push(e[0]),a}},{key:"wordsMatch",value:function(e,t){t=Object.assign([],t);for(var a=0;a<e.length;a++){for(var n=e[a],r=!1,o=0;o<t.length;o++){var i=t[o],s="";if(i in w&&(s=w[i]),0==i.indexOf(n)||0==s.indexOf(n)){r=!0,t.splice(o,1);break}}if(!r)return!1}return!0}},{key:"drawOneMobResult",value:function(e){var t=e.className||"",a=e.text;return e.rightText&&(a+=' <span class="right-text">'.concat(e.rightText,"</span>")),e.url?'<a href="'.concat(e.url,'"><div class="').concat(t,'">').concat(a,"</div></a>"):'<div class="'.concat(t,'">').concat(a,"</div>")}},{key:"drawMobSearchResults",value:function(e){var t=e.map(this.drawOneMobResult);$("#mob-search-results").html(t.join("")).show()}}])&&y(t.prototype,a),o&&y(t,o),e}(),C=a(8);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function x(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var T=a(13),I=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.revealImageSource=function(e){var t=$(e.target).data("source");$(e.target).closest(".photo-modal").find(".attribution").html('<a href="'.concat(t,'" target="_blank">')+n.a.translate("Image Source")+"</a>")},this.preventBackspace=function(e){if(8===e.keyCode){var t=e.srcElement||e.target,a=!1;"INPUT"===t.tagName.toUpperCase()&&["TEXT","PASSWORD","FILE","SEARCH","EMAIL","NUMBER","DATE"].includes(t.type.toUpperCase())&&(a=!0),"TEXTAREA"==t.tagName.toUpperCase()&&(a=!0),"DIV"==t.tagName.toUpperCase()&&t.contentEditable&&(a=!0),a?(t.readOnly||t.disabled)&&e.preventDefault():e.preventDefault()}if(9===e.keyCode){var n=e.srcElement||e.target;if("TEXTAREA"==n.tagName.toUpperCase()&&!n.readOnly&&!n.disabled){var r=n.value,o=n.selectionStart;r=r.substr(0,n.selectionStart)+"\t"+r.substr(n.selectionEnd),$(n).val(r).prop("selectionStart",o+1).prop("selectionEnd",o+1),e.preventDefault()}}},this.drawUserDropdown=function(){var e=a.data.quiz;null==e&&null!=a.data.create&&(e=a.data.create.quiz);var t=a.data.liveLink,n=a.user,r=!1;"game"==a.pageGroup&&(e.user==n.uid||i.a.isQuizmaster(a)||i.a.isTrustedUser(a))&&(r=!0);var o=!1;i.a.isQuizmaster(a)&&(r||t)&&(o=!0);var s=i.a.getLangProp(a.language,"code"),l="en"==s?"/user-stats":"/"+s+"/user-stats",c=[a.drawUserItem("/your-account","Your Account"),a.drawUserItem(l,"Your Stats"),a.drawUserItem("/users/"+n.url,"Your Public Profile"),a.drawUserItem("/your-favorite-quizzes","Your Favorite Quizzes"),a.drawUserItem("/user-subscriptions","Your Subscriptions")],u=[a.drawUserItem("/create-blog","Create / Edit Blog"),a.drawUserItem("/blog-feed","Your Blog Feed")];n.numblogs>0&&u.push(a.drawUserItem("/users/"+n.url+"/blog","Your Blog"));var d=[a.drawUserItem("/create-quiz","Create / Edit Quiz")];n.numquizzes>0&&d.push(a.drawUserItem("/user-quizzes/"+n.uid,"Your Live Quizzes"),a.drawUserItem("/user-analytics","Your Quiz Analytics"));var h=[];r&&(h.push(a.drawUserItem("/create-quiz/"+e.id,"Edit This Quiz")),h.push(a.drawUserItem("/user-analytics?quiz="+e.id,"Analyze This Quiz"))),o&&h.push(a.drawUserItem("/admin/update-quiz.php?id="+e.id,"Update This Quiz")),t&&h.push(a.drawUserItem(t,"Live Version of this Quiz")),null!=a.data.blogId&&null!=a.data.blogOwner&&(a.data.blogOwner==n.uid||i.a.isQuizmaster(a))&&h.push(a.drawUserItem("/create-blog/"+a.data.blogId,"Edit This Blog"));var f=[a.drawUserItem(null,"Logout","logout-link")],p='\n      <div class="screenname">'.concat(n.screenname,"</div>\n      ").concat(a.drawUserSection(c),"\n      ").concat(a.drawUserSection(u),"\n      ").concat(a.drawUserSection(d),"\n      ").concat(a.drawUserSection(h),"\n      ").concat(a.drawUserSection(f));$("#user-dropdown .dropdown-content").html(p)},this.logoutEx=function(){$(".login-modal .txt-email").val(""),$(".login-modal .txt-password").val(""),o.a.go({url:"/api/logout.php",type:"GET",loading:"Logging Out",callback:function(){a.setUser(null),r.a.alert("Success","You are now logged out")}})},this.logout=function(){r.a.close(),a.create?a.create.state.logout():a.logoutEx()},this.changeHotLanguage=function(){var e=$("#sel-hot-language").val();$.ajax({type:"GET",url:"/api/get-hot-quizzes.php",data:{language:e},success:function(e){$("#hot-quizzes .body").html(e)}})},this.subscribe=function(){if(null!=a.user){var e="german"==a.language?"Möchten Sie ".concat(a.data.subscribeScreen," abonnieren?"):"".concat(n.a.translate("Would you like to subscribe to")," ").concat(a.data.subscribeScreen,"?"),t="\n      <p>".concat(e,'</p>\n      <p class="txt-sm"><a href="/manage-subscriptions#what-are-subs" target="_blank">').concat(n.a.translate("What are Subscriptions?"),"</a>\n    ");r.a.choice("Subscribe?",t,[n.a.translate("No"),n.a.translate("Yes")],[null,a.subscribeEx])}else a.showAskCreate()},this.subscribeEx=function(){o.a.go({url:"/api/subscribe-user.php",data:{user:a.data.subscribeUser,action:"subscribe",type:a.data.subscribeQorB},callback:function(){"german"==a.language?r.a.alert("Thank You","Sie haben "+a.data.subscribeScreen+" nun abonniert"):r.a.alert("Thank You",n.a.translate("You are now subscribed to")+" "+a.data.subscribeScreen),$(".page").removeClass("unsubscribed").addClass("subscribed")}})},this.unsubscribe=function(){var e="german"==a.language?"Abo von "+a.data.subscribeScreen+" beenden?":n.a.translate("Unsubscribe from")+" "+a.data.subscribeScreen+"?";r.a.choice("Unsubscribe?",e,["No","Yes"],[null,a.unsubscribeEx])},this.unsubscribeEx=function(){o.a.go({url:"/api/subscribe-user.php",data:{user:a.data.subscribeUser,action:"unsubscribe",type:a.data.subscribeQorB},callback:function(){r.a.alert("Success","You are now unsubscribed"),$(".page").removeClass("subscribed").addClass("unsubscribed")}})},this.stripQueryString(),this.isTablet=this.adjustForIpadOS(t.isTablet),this.language=t.language,this.user=t.user,this.pageType=t.pageType,this.pageGroup=t.pageGroup,this.reloadOnLogin=t.reloadOnLogin,this.device=t.device,this.data=t.data,this.country=t.country,this.create=null,this.login=new p(this),this.searchBox=new k(this),this.comments=new u(this),"phone"==this.device&&(this.mobileButtons=new g(this)),this.data.superTable&&new C.a(this,this.data.superTable),this.showHateAds(),this.detectAdBlock(),this.isTablet&&this.sortTabletViewport(),$("body").on("click",".logout-link",this.logout),$("#sel-hot-language").on("change",this.changeHotLanguage),$(".subscribe").on("click",this.subscribe),$(".unsubscribe").on("click",this.unsubscribe),$("html").on("keydown",this.preventBackspace),$("body").on("click",".reveal-image-source",this.revealImageSource),$(".page").on("click",".help-question-mark",this.getHelpQuestionMark),$("#show-most-popular").on("click",(function(){$(".other-languages").hide(),$(".browse-box").hide(),$(".most-popular-box").toggle()})),$("#show-other-languages").on("click",(function(){$(".most-popular-box").hide(),$(".browse-box").hide(),$(".other-languages").toggle(),$(".other-languages").is(":visible")&&$(".other-languages").css("display","flex")})),$("#show-browse-box").on("click",(function(){$(".most-popular-box").hide(),$(".other-languages").hide(),$(".browse-box").toggle()})),$(".close-spotlight").on("click",this.closeSpotlight),this.user&&this.drawUserDropdown()}var t,a,s;return t=e,(a=[{key:"closeSpotlight",value:function(){$.ajax({type:"GET",url:"/api/close-spotlight.php"}),$(".spotlight-notification").hide()}},{key:"adjustForIpadOS",value:function(e){return window.screen.height/window.screen.width==1024/768||window.screen.height/window.screen.width==1112/834||window.screen.height/window.screen.width==1366/1024||e}},{key:"getHelpQuestionMark",value:function(e){var t=$(e.target).closest(".link-like").prop("id"),a=T[t];if(a){var n=S(a,2),o=n[0],i=n[1];r.a.alert(o,i)}}},{key:"sortTabletViewport",value:function(){var e=document.documentElement.clientWidth,t=document.documentElement.scrollWidth;t>e&&document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale="+e/t)}},{key:"showImageAttribution",value:function(e,t){var a="";"pixa"==t.src?a=n.a.translate("Public domain image from Pixabay.com"):"wiki"==t.src?("File"==t.url.substr(0,4)&&(t.url="https://commons.wikimedia.org/wiki/"+t.url),a="<p>".concat(n.a.translate("Image from Wikimedia Commons."),'</p><p><span data-source="').concat(t.url,'" class="link-like reveal-image-source">').concat(n.a.translate("Click</span> to reveal authorship and copyright (may contain spoilers)"),"</span></p>")):a="phone"==e.device?n.a.translate("Custom image"):"";var o='\n      <div><img src="/img/user-photo-library/'.concat(t.fn.substr(0,2),"/").concat(t.fn,"-450.").concat(t.ext,'"/></div>\n      <div class="attribution">').concat(a,"</div>\n    ");r.a.alert("Photo Information",o,null,{customClass:"photo-modal"})}},{key:"stripQueryString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=window.location.href;if(e||-1!=t.indexOf("?switchDevice")||-1!=t.indexOf("/quizzes")||-1!=t.indexOf("/friends")||-1!=t.indexOf("/blog/")||-1!=t.indexOf("/user-quizzes")||-1!=t.indexOf("/user-stats")||-1!=t.indexOf("/minigames")){var a=t.replace(/\?.*/,"");t!=a&&history.replaceState(null,"",a)}}},{key:"showHateAds",value:function(){var e;this.user&&this.user.isPremium||(e=this.user?'<div>Hate Ads?</div><div><a href="/jetpunk-premium"><button class="red">Get JetPunk Premium</button></a></div>':"<div>"+n.a.translate("Save Your Progress")+'</div><button class="green create-account-link">'+n.a.translate("Create Account")+"</button>",$("#random-beg-box").html(e).addClass("show"))}},{key:"detectAdBlock",value:function(){var e=this;this.adblock=!1;var t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox",document.body.appendChild(t),window.setTimeout((function(){0===t.offsetHeight&&(e.adblock=!0),t.remove(),e.handleAdblock()}),100)}},{key:"handleAdblock",value:function(){if("-1"==location.href.indexOf("jetpunk-premium")&&this.adblock&&(!this.user||!this.user.isPremium)){var e=!1;if(null!==this.user&&this.user.numquizzes>0&&this.user.timestaken/this.user.numquizzes>1e3&&(e=!0),!e){var t={daily:[],total:0},a=localStorage.getItem("pageHistory");null!=a&&(t=JSON.parse(a));var n=Date.now(),r=n-864e5;t.daily=t.daily.filter((function(e){return e>r}));var o=!1,i=Math.max(100-t.total,20-t.daily.length);if(i<=0){var s='\n          <p>You have used all your AdBlock page views per 24 hour period. Please disable your AdBlocker for JetPunk or come back later.</p>\n          <p>Or, better yet, try <a href="/jetpunk-premium">JetPunk Premium.</p>';$(".adblock-user").html(s).show(),$(".hide-adblock .content").html(""),o=!0}else i<=5&&(s="\n          <p>It looks like you're using an AdBlocker.  Unfortunately, due to declining revenue, we are now limiting the daily page views for AdBlock users.<p>\n          <p>".concat(1==i?"This is your last AdBlock page view for today.":"You have "+i+" page views left today with AdBlock.",'</p>\n          <p>Don\'t want to see ads? Try <a href="/jetpunk-premium">JetPunk Premium.'),$(".adblock-user").html(s).show());t.total+=1,o||t.daily.push(n),localStorage.setItem("pageHistory",JSON.stringify(t))}}}},{key:"setUser",value:function(e){if(this.reloadOnLogin)location.reload();else{if(this.user=e,$(".page").removeClass("logged-in logged-out has-notifications has-friend-notifications subscribed unsubscribed nominated unnominated color-blind"),e){$(".page").addClass("logged-in"),e.notifications>0&&($(".page").addClass("has-notifications"),$(".num-bell").text(e.notifications>999?999:e.notifications)),e.friendNotifications>0&&($(".page").addClass("has-friend-notifications"),$(".num-friend").text(e.friendNotifications>999?999:e.friendNotifications)),1==e.colorblind&&$(".page").addClass("color-blind"),e.subscribedTo?$(".page").addClass("subscribed"):$(".page").addClass("unsubscribed"),e.quizNomination?$(".page").addClass("nominated"):$(".page").addClass("unnominated");var t=i.a.isPointsLanguage(this.language)?this.language:"english";$(".badge-level").text(e.pointsObj[t].level),$(".screenname").text(e.screenname),this.drawUserDropdown()}else $(".page").addClass("logged-out unsubscribed unnominated");this.comments.init(),this.rateQuiz&&this.rateQuiz.drawRating()}}},{key:"drawUserSection",value:function(e){return 0==e.length?"":'\n      <div class="section">\n        '.concat(e.join(""),"\n      </div>")}},{key:"drawUserItem",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t='<div class="item '.concat(a,'">').concat(n.a.translate(t),"</div>"),null!=e&&(t='<a href="'.concat(e,'">').concat(t,"</a>")),t}},{key:"showAskCreate",value:function(){var e="\n      <p>You must be logged in to use this feature</p>\n      <div class='two-button-row'>\n        <button class=\"blue close login-link\">".concat(n.a.translate("Login"),'</button>\n        <button class="green close create-account-link">').concat(n.a.translate("Create Account"),"</button>\n      </div>");r.a.alert(n.a.translate("Must be Logged In"),e,null,{hideFooter:!0,customClass:"ask-create-modal"})}},{key:"facebookLike",value:function(){var e=[location.protocol,"//",location.host,location.pathname].join("")+"?lx=fb";"phone"==this.device?(e="http://m.facebook.com/sharer.php?u="+encodeURIComponent(e),window.open(e,"facebook-share-dialog","width="+screen.width+",height="+screen.height)):(e="http://www.facebook.com/sharer.php?u="+encodeURIComponent(e),window.open(e,"facebook-share-dialog","width=626,height=436"))}}])&&x(t.prototype,a),s&&x(t,s),e}()},,,function(e){e.exports=JSON.parse('{"1":"ONE","2":"TWO","3":"THREE","4":"FOUR","5":"FIVE","6":"SIX","7":"SEVEN","8":"EIGHT","9":"NINE","10":"TEN","20":"TWENTY","50":"FIFTY","100":"HUNDRED","PHOTO":"PICTURE","PICTURE":"PHOTO","START":"BEGIN","BEGIN":"START","ISLAMIC":"MUSLIMS","MUSLIM":"ISLAM","MUSLIMS":"ISLAM","ISLAM":"MUSLIMS","CANADA":"CANADIAN","CANADIAN":"CANADA","TRADE":"TRADING","TRADING":"TRADE","ANDES":"ANDEAN","ANDEAN":"ANDES","FURTHEST":"FARTHEST","FARTHEST":"FURTHEST","CITIES":"CITY","CITY":"CITIES","COUNTRIES":"COUNTRY","COUNTRY":"COUNTRIES","CLOSEST":"NEAREST","NEAREST":"CLOSEST","POPULOUS":"POPULATION","POPULATION":"POPULOUS","TV":"TELEVISION","TELEVISION":"TV","ENGLISH":"ENGLAND","ENGLAND":"ENGLISH","MOVIE":"FILM","FILM":"MOVIE","EUROPE":"EUROPEAN","ASIA":"ASIAN","AFRICA":"AFRICAN","BIGGEST":"LARGEST","LARGEST":"BIGGEST","QUARTERBACKS":"QBS","QBS":"QUARTERBACKS","BEST":"GREATEST","GREATEST":"BEST","FEWEST":"LOWEST","LEAST":"LOWEST","LOWEST":"FEWEST","HIGHEST":"MOST","MOST":"HIGHEST","ONE":"1","TWO":"2","THREE":"3","FOUR":"4","FIVE":"5","SIX":"6","SEVEN":"7","EIGHT":"8","NINE":"9","TEN":"10","TWENTY":"20","FIFTY":"50","HUNDRED":"100","FRANCE":"FRENCH","FRENCH":"FRANCE","SPANISH":"SPAIN","SPAIN":"SPANISH","GREEK":"GREECE","GREECE":"GREEK","CHINA":"CHINESE","CHINESE":"CHINA","DENMARK":"DANISH","DANISH":"DENMARK","ALL":"EVERY","EVERY":"ALL","AVERAGE":"MEDIAN","MEDIAN":"AVERAGE","ROME":"ROMAN","ROMAN":"ROME","RICHEST":"WEALTHIEST","US":"UNITEDSTATES","STATES":"US","UNITEDSTATES":"US","UK":"UNITEDKINGDOM","KINGDOM":"UK","UNITEDKINGDOM":"UK","COUNTY":"COUNTIES","COUNTIES":"COUNTY"}')},function(e){e.exports=JSON.parse('{"hqm-sort-type":["Sort Type","<b>Alphabetical</b> - Sort answers alphabetically<p><b>Numerical - US/UK</b> - Sort answers numerically according to standard English format (e.g. 1,234.56)</p><p><b>Numerical - Europe</b> - Sort answers numerically according to typical European format (e.g. 1.234,56 or 1 234,56)</p>"],"hqm-selector-height":["Selector Height","<p>The selector height specified is only a maximum, if there are few answers then the height will shrink accordingly.</p><p><b>Recommended</b> - Set to \\"Auto\\" to make the selector have a maximum height in line with the bottom of the SVG map.</p><p><b>Custom</b> - Set the height to a custom amount, useful if you have a short SVG and the \\"Auto\\" setting results in a short answer box.</p>"],"hqm-random-choices":["Randomize Choices","If set to \\"Yes\\", the choices within every question will be randomly shuffled every time the user takes the quiz."],"hqm-use-explanations":["Post-Game Explanations","With this enabled, you can add explanations for each question that will appear to the user after the quiz is finished."],"hqm-copy-choices":["Copy Choices","This will copy the choices of the selected question to every other question."],"hqm-mobile-design":["Mobile Design Options","<p>This determines how your quiz will be displayed on a mobile phone.</p><p><b>Default</b> - The content will be condensed to fit onto the width of a mobile screen.</p><p><b>Scroll</b> - The content will display the same as on desktop browsers. The user will be able to scroll horizontally to see all the content. (Recommended for SVG quizzes.)</p>"],"hqm-design-mode":["Design Mode","<b>Recommended</b> - Auto mode automatically arranges the answers on the grid.<p><b>Advanced</b> - Manual mode allows you to add rows, columns and blocks in order to put answers, hints or text wherever you want on the grid</p>"],"hqm-random-tiles":["Randomize Tiles","If set to \\"Yes\\", the tiles within every question will be randomly shuffled every time the user takes the quiz."],"hqm-copy-tiles":["Copy Tiles","This will copy the tiles of the selected question to every other question."],"hqm-switch-input":["Switch Input Mode","In Tile Select quizzes, there are two modes of input required to create the quiz:<table style=\'font-size:15px;margin: 5px 0;\'><tr><td style=\'width:100px;display: block;\'><b>Typing Mode:</b></td><td>This mode is the default starting mode and allows you to type inside the tiles</td></tr><tr><td style=\'width:100px;display: block;\'><b>Select Mode:</b></td><td>This mode allows you to select the tiles for each question which should be selected during gameplay</td></tr><br></table>The currently selected mode is shown above the first question."],"hqm-photo-layout":["Picture Layout","<b>Fixed Width</b> - All the images are the same width. Each row has the same number of pictures.<p><b>Variable</b> - The images can be resized, and can be different widths. We put as many on a row as will fit.</p>"],"hqm-yellow-box":["Yellow Box Mode","Normally, the user can answer questions in any order. If you set Yellow Box to \\"Yes\\", then the user can only answer the highlighted question. Use with caution."],"hqm-visibility":["Visibility","Quizzes marked \\"Private\\" will not be displayed except to your friends or people with whom you share a link. They will still be moderated."],"hqm-svg-missing-dots":["Show Missing Dots","<p>We recommend setting this to <b>No</b><p>\\"Missing Dots\\" is a feature on the <a href=\'https://www.jetpunk.com/quizzes/how-many-countries-can-you-name\' target=\'_blank\'>Countries of the World Quiz</a>.</p><p>It shows a small dot on the SVG where an answer has yet to be guessed. The dots need to be programmed using columns 2 and 3 of Step 2, measured in pixels from the top-left.<p><p>You can change the text shown under the \\"SVG Map\\" options to the right.</p>"],"hqm-svg-hidden-paths":["Hidden Paths","<p>If set to \\"Yes\\", all paths associated with the ids / classes of the answers in Step 2 will be hidden until guessed.</p><p>For Random quizzes, only the paths associated with the answers selected will be hidden.</p>"],"hqm-add-caveat":["Add / Remove Caveats","<p>Caveats are the \\"fine print\\", often used to explain nit-picky details or to list sources.</p><p>We recommend keeping them short and sweet."],"hqm-blog-blurb":["Blog Blurb","The blurb is a short summary of the blog article that will appear on your main blog page. HTML is heavily limited in this section."],"hqm-blog-visibility":["Visibility","<p>Blogs marked \\"Unlisted\\" will be available publicly, but only on your blog page, and will not appear on any other pages.</p><p>Marking as \\"Private\\" means your blog will not be displayed except to people with whom you share a link.</p><p>All blogs will still be moderated.</p>"],"hqm-blog-tags":["Blog Tags","With blog tags you have the option to attach a tag to your blog to help interested users find it more easily. Each blog can only have one tag, so choose the most appropriate."],"hqm-blog-ql":["Quick Links","All Headings of your blog (not in Split components) will be used to create a contents list at the top of your blog to make it easier to navigate"]}')},,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(2);var r=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.unbind=function(){1!=a.zoomLevel&&a.unzoom(),$(".svg-holder").unbind()},this.clickMap=function(e){a.width=parseFloat($(".svg-holder svg:visible").attr("width")),a.height=parseFloat($(".svg-holder svg:visible").attr("height")),null==a.viewBoxOriginal&&(a.viewBoxOriginal=$(".svg-holder svg:visible").attr("viewBox"),null==a.viewBoxOriginal?a.viewBoxOriginal=[0,0,a.width,a.height]:a.viewBoxOriginal=a.viewBoxOriginal.split(" ").map((function(e){return parseFloat(e)})),a.viewX=a.viewBoxOriginal[0],a.viewY=a.viewBoxOriginal[1],a.viewWidth=a.viewBoxOriginal[2],a.viewHeight=a.viewBoxOriginal[3]),1==a.zoomLevel?a.zoom(e):a.unzoom()},this.unzoom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".svg";a.viewBox=a.viewBoxOriginal,$(e+"-holder svg:visible")[0].setAttribute("viewBox",a.viewBox.join(" ")),$(e+"-holder .zoomable-circle").each((function(e,t){var n=$(t).attr("r");if(n)$(t).attr("r",n*a.zoomLevel);else{var r=$(t).attr("rx"),o=$(t).attr("ry");$(t).attr("rx",r*a.zoomLevel).attr("ry",o*a.zoomLevel)}})),$(e+"-holder .city-select").each((function(e,t){var a=$(t).attr("r");$(t).attr("r",2*a)})),n.a.svgRemoveClass(e+"-holder .border","small-stroke"),n.a.svgRemoveClass(e+"-holder .zoomable-circle","small-stroke"),n.a.svgRemoveClass(e+"-holder .city-select","small-stroke"),a.zoomLevel=1,a.zoomCallback&&a.zoomCallback()},this.zoom=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".svg";a.zoomLevel=4;var r=$(t+"-holder svg:visible").position(),o=e.pageX-r.left,i=e.pageY-r.top,s=n.a.constrainRange(o/a.width,0,1),l=n.a.constrainRange(i/a.height,0,1),c=a.viewWidth*(s*(1-1/a.zoomLevel))+a.viewX,u=a.viewHeight*(l*(1-1/a.zoomLevel))+a.viewY,d=a.viewWidth/a.zoomLevel,h=a.viewHeight/a.zoomLevel;a.viewBox=[c,u,d,h],$(t+"-holder svg:visible")[0].setAttribute("viewBox",a.viewBox.join(" ")),n.a.svgAddClass(t+"-holder .border","small-stroke"),n.a.svgAddClass(t+"-holder .zoomable-circle","small-stroke"),n.a.svgAddClass(t+"-holder .city-select","small-stroke"),$(t+"-holder .zoomable-circle").each((function(e,t){var n=$(t).attr("r");if(n)$(t).attr("r",n/a.zoomLevel);else{var r=$(t).attr("rx"),o=$(t).attr("ry");$(t).attr("rx",r/a.zoomLevel).attr("ry",o/a.zoomLevel)}})),$(t+"-holder .city-select").each((function(e,t){var a=$(t).attr("r");$(t).attr("r",a/2)})),a.zoomCallback&&a.zoomCallback()},this.page=t,this.zoomLevel=1,this.viewBox,this.viewBoxOriginal,this.zoomCallback=null,$(".svg-holder").on("click","svg",this.clickMap)}},function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=["","January","February","March","April","May","June","July","August","September","October","November","December"],o=[-1,31,-1,31,30,31,30,31,31,30,31,30,31],i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,i;return t=e,(a=[{key:"padZero",value:function(e){return e<10?"0"+e:e}},{key:"getFormattedDate",value:function(e){return e.year+"-"+this.padZero(e.month)+"-"+this.padZero(e.day)}},{key:"parseFormattedDate",value:function(e){var t=e.split("-");return{year:parseInt(t[0]),month:parseInt(t[1]),day:parseInt(t[2])}}},{key:"getToday",value:function(){var e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"getYesterday",value:function(){var e=new Date;return e.setDate(e.getDate()-1),{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}},{key:"getMonthName",value:function(e){return r[e]}},{key:"getMaxDays",value:function(e,t){return 2==t?e%4==0?29:28:o[t]}},{key:"compareDates",value:function(e,t){return e.year==t.year?e.month==t.month?e.day==t.day?0:e.day<t.day?-1:1:e.month<t.month?-1:1:e.year<t.year?-1:1}},{key:"convertStringToNiceDate",value:function(e,t){var a=t.substr(0,10).split("-");return"phone"==e?t.substr(0,10):this.getMonthName(parseInt(a[1]))+" "+a[2]+", "+a[0]}}])&&n(t.prototype,a),i&&n(t,i),e}();t.a=new i},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(1),r=a(2),o=a(0);function i(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,a){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyDown=function(e){if(n.open){switch(e.which){case 9:e.shiftKey?n.moveCursor(-1):n.moveCursor(1);break;case 13:n.select();break;case 38:n.moveCursor(-1);break;case 40:n.moveCursor(1);break;default:return}e.preventDefault()}},this.closed=function(){n.open=!1},this.clickSearchUser=function(e){var t,a=$(e.target).data("id"),r=i(n.results);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.uid==a)return void n.chooseUser(o)}}catch(e){r.e(e)}finally{r.f()}},this.typing=function(e){var t=n.getSearchTerm(e.target.value);t!=n.term?(n.term=t,""==t||n.cache[t]?n.drawResults():(n.setLoading(!0),n.search(t))):n.drawResults()},this.search=function(e){$.ajax({type:"POST",url:"/api/search-users.php",data:{term:e},success:function(t){var a;try{a=JSON.parse(t)}catch(e){return}n.cache[e]=a,e==n.term&&n.drawResults()}})},this.page=t,this.callback=a,this.cache={},this.term="",this.loading=!1,this.open=!1,this.results=[],this.selectedIdx=-1,$("body").on("input",".friend-search-modal .txt-friend-search",this.typing),$("body").on("click",".friend-search-modal .search-results .result",this.clickSearchUser),$(document).on("keydown",this.keyDown)}var t,a,s;return t=e,(a=[{key:"moveCursor",value:function(e){$(".friend-search-modal .result").removeClass("selected");var t=this.selectedIdx;(t+=e)>=this.results.length&&(t=0),t<0&&(t=this.results.length-1),$("#friend-row-"+t).addClass("selected"),this.selectedIdx=t}},{key:"launch",value:function(){this.open=!0;var e="\n      ".concat(o.a.translate("Enter screen name here:"),'\n      <div class="mt-1 search-holder">\n        <div><input type="text" class="txt-friend-search" /></div>\n        <div class="loading"><i class="fa fa-circle-notch fa-spin"></i></div>\n      </div>\n      <div class="search-results"></div>\n    ');n.a.alert("Search Users",e,this.closed,{hideFooter:!0,customClass:"friend-search-modal"})}},{key:"select",value:function(){-1!=this.selectedIdx&&this.chooseUser(this.results[this.selectedIdx])}},{key:"chooseUser",value:function(e){n.a.close(),this.callback(e)}},{key:"getSearchTerm",value:function(e){return(e=r.a.normalizeString(e)).length>3?e.substring(0,3):e.length>=1?e:""}},{key:"setLoading",value:function(e){this.loading=e,$(".friend-search-modal .loading").toggle(e)}},{key:"filterResults",value:function(e){for(var t=r.a.normalizeString($(".txt-friend-search").val()),a=[],n=0;n<e.length;n++){var o=e[n],i=o.screenname.toUpperCase();0==i.indexOf(t)&&(i==t?a.unshift(o):a.length<8&&a.push(o))}return a.slice(0,8)}},{key:"drawResults",value:function(){if(this.selectedIdx=-1,this.results=[],""!=this.term){if(!this.cache[this.term])return;this.results=this.cache[this.term],this.results=this.filterResults(this.results)}var e;this.setLoading(!1),e=0==this.results.length&&""!=this.term?"<div>No results found</div>":(e=this.results.map((function(e,t){return'<div data-id="'.concat(e.uid,'" id="friend-row-').concat(t,'" class="result">').concat(e.screenname,"</div>")}))).join(""),$(".friend-search-modal .search-results").html(e)}}])&&l(t.prototype,a),s&&l(t,s),e}()},,,,,,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){"use strict";a.r(t);var n=a(9);var r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=t,google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(_drawChart)},o=a(0),i=a(1),s=a(3);var l=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logDiscordClick=function(){a.logged||(a.logged=!0,s.a.go({url:"/api/log-discord-click.php",data:{},loading:"DONOTLOAD",errCallback:function(){},callback:function(){}}))},this.submitContact=function(){var e=$("#contact-name").val().trim();if(""!=e){var t=$("#contact-email").val().trim();if(""==t)return i.a.alert("Error","Please enter an e-mail address so we can contact you"),!1;var a=$("#contact-comments").val().trim();if(""==a)return i.a.alert("Error","Please enter a question or comment"),!1;s.a.go({url:"/api/submit-contact-form.php",data:{name:e,email:t,comments:a},loading:"Sending feedback",callback:function(){$("#contact-blurb").html("<p>"+o.a.translate("Your question or comment has been sent. Thank you for contacting JetPunk.com!")+"</p>"),$("#contact-form").hide()}})}else i.a.alert("Error","Please enter a name")},this.page=t,this.logged=!1,$("#contact-submit").on("click",this.submitContact),$(".discord-link").on("mouseover",this.logDiscordClick)};var c=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.go=function(){var e=$("#quiz-to-copy").val();s.a.go({url:"/api/copy-featured-quiz.php",data:{url:e},loading:"Copying ...",callback:function(){i.a.alert("Success","Quiz copied",(function(){return document.location.href="/create-quiz"}))}})},this.page=t,$("#btn-submit-copy").on("click",this.go)};var u=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.deleteAccount=function(){s.a.go({url:"/api/delete-account-exec.php",data:{confirm:1},loading:"Deleting account",callback:function(){window.location="/goodbye"}})},this.page=t,$("#btn-delete-account").on("click",this.deleteAccount)},d=a(15);function h(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hoverPath=function(e){var t,n=h(a.countries);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.path==e.target.id)return void a.setHoverPath(r)}}catch(e){n.e(e)}finally{n.f()}var o,i=h(a.countries);try{for(i.s();!(o=i.n()).done;){var s=o.value;$(e.target).hasClass(s.path)&&a.setHoverPath(s)}}catch(e){i.e(e)}finally{i.f()}},this.showCountriesList=function(){var e,t=[],n=(Object.values(a.countries).sort((function(e,t){return e.name>t.name})),h(a.countries));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.checked&&null==r.parent){t.push("<tr><td><b>"+r.name+"</b></td></tr>");var s,l=h(Object.values(r.regions).sort((function(e,t){return e.name>t.name})));try{for(l.s();!(s=l.n()).done;){var c=s.value;c.checked&&t.push("<tr><td>"+c.name+" ("+r.name+")</td></tr>")}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){n.e(e)}finally{n.f()}var u='\n      <div class="blurb">'.concat(o.a.translate("A list of all countries visited by this user. Countries are distinguished in bold."),'</div>\n      <div class="table-holder">\n        <table class="standard-table responsive-table">\n          <tr><th>').concat(o.a.translate("Country / Region"),"</th></tr>\n          ").concat(t.join(""),"\n        </table>\n      </div>\n    ");i.a.alert("Countries Visited Map",u,null,{hideFooter:!0,customClass:"show-countries-list"})},this.page=t,this.countries=t.data.countries,this.initCountries(),this.drawCountries(),$(".svg-holder path, .svg-holder ellipse, .svg-holder circle").on("mouseover",this.hoverPath),$(".svg-holder path, .svg-holder ellipse, .svg-holder circle").on("mouseout",this.unhoverPath),this.mapZoomer=new d.a(this.page),$("#see-all-countries").on("click",this.showCountriesList)}var t,a,n;return t=e,(a=[{key:"initCountries",value:function(){var e,t=[],a=h(this.countries);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.parent=null,t.push(n);var r,o=h(n.regions);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.parent=n,t.push(i)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){a.e(e)}finally{a.f()}this.countries=t}},{key:"setHoverPath",value:function(e){var t=null!=e.parent?"".concat(e.parent.name," - ").concat(e.name):e.name;$(".hovered-path-x").html(t)}},{key:"svgSetClasses",value:function(e,t,a){t?($("#"+e).addClass("visited"),$("."+e).addClass("visited")):($("#"+e).removeClass("visited"),$("."+e).removeClass("visited")),a?($("#"+e).addClass("light-visited"),$("."+e).addClass("light-visited")):($("#"+e).removeClass("light-visited"),$("."+e).removeClass("light-visited"))}},{key:"drawCountries",value:function(){var e,t=h(this.countries);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.checked&&this.drawCountry(a)}}catch(e){t.e(e)}finally{t.f()}}},{key:"drawCountry",value:function(e){if(0==e.regions.length)this.svgSetClasses(e.path,e.checked,!1);else{var t,a=!1,n=h(e.regions);try{for(n.s();!(t=n.n()).done;){var r=t.value;a=a&&r.checked,r.checked?this.svgSetClasses(r.path,!0,!1):this.svgSetClasses(r.path,!1,e.checked)}}catch(e){n.e(e)}finally{n.f()}a||this.svgSetClasses(e.path,e.checked,!1)}}}])&&p(t.prototype,a),n&&p(t,n),e}(),v=a(2);function m(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.boxClicked=function(e){if(!$(e.target).hasClass("fa")&&!$(e.target).hasClass("country-box")){var t=$(e.target).closest(".country-box-holder").data("id");$(".country-"+t).is(":checked")?$(".country-"+t).prop("checked",!1):$(".country-"+t).prop("checked",!0),$(".country-"+t).change()}},this.searchTyped=function(e){var t=$(e.target).val().trim().toLowerCase();if(""==t)$(".country-search .country-box-holder").hide(),$(".country-search-list").css("border","none");else{var a,n=null,r=m($(".country-search .country-box-holder"));try{for(r.s();!(a=r.n()).done;){var o=a.value;v.a.normalizeWords(o.textContent).toLowerCase().includes(t)?($(o).show(),n=o):$(o).hide()}}catch(e){r.e(e)}finally{r.f()}0==$(".country-search .country-box-holder:visible").length?$(".country-search-list").css("border","none"):$(".country-search-list").css("border","1px solid #ccc"),$(".country-search .country-box-holder:visible").length<10?$(".country-search-list").css("overflow-y","hidden"):$(".country-search-list").css("overflow-y","scroll"),$(".country-search .country-box-holder").css("border-bottom","1px solid #ccc"),null!=n&&$(n).css("border-bottom","none")}},this.chevronClicked=function(e){var t=$(e.target).closest(".fa").data("id"),a="fa-chevron-up";$(e.target).hasClass("fa-chevron-up")&&(a="fa-chevron-down"),$(".country-regions[data-id='"+t+"']").toggle(),$(e.target).removeClass("fa-chevron-up fa-chevron-down").addClass(a)},this.save=function(){var e,t=[],n=m(a.map.countries);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.checked&&t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}t="["+t.join(",")+"]",s.a.go({url:"/api/save-countries-visited.php",data:{visited:t},loading:"Saving map",callback:function(){a.setSaved(!0)}})},this.beforeUnload=function(){if(0==a.saved)return"You have unsaved changes!"},this.checkboxClicked=function(e){var t=$(e.target).closest(".country-box-holder").data("id"),n=a.countriesById[t];if($(e.target).is(":checked"))$(".country-"+n.id).prop("checked",!0),n.checked=!0,null!==n.parent&&(n.parent.checked=!0,$(".country-"+n.parent.id).prop("checked",!0));else{var r,o=!1,s=m(n.regions);try{for(s.s();!(r=s.n()).done;){if(r.value.checked){o=!0;break}}}catch(e){s.e(e)}finally{s.f()}o&&0==i.a.modals.length?($(".country-regions[data-id='"+t+"']").show(),$(".country-"+n.id).prop("checked",!0),$(".fa[data-id="+t+"]").removeClass("fa-chevron-up fa-chevron-down").addClass("fa-chevron-down"),n.checked=!0,i.a.choice("Warning!","Unchecking this country will also uncheck all of its region. Are you sure?",["Yes","No"],[function(){return a.checkRegions(n.id,!1)},function(){return a.checkRegions(n.id,!0)}])):($(".country-"+n.id).prop("checked",!1),n.checked=!1)}null!==n.parent?a.map.drawCountry(n.parent):a.map.drawCountry(n),a.setSaved(!1),a.drawNumCountries()},this.page=t,this.map=new g(this.page),this.countriesById=[];var n,r=m(this.map.countries);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.countriesById[o.id]=o}}catch(e){r.e(e)}finally{r.f()}this.drawCheckboxes(),this.saved=!0,$(".country-box-holder").on("click",this.boxClicked),$(".country-box").on("change",this.checkboxClicked),$(".edit-countries-visited-content .fa").on("click",this.chevronClicked),$("#country-search-box").on("input",this.searchTyped),$("#btn-save-countries").on("click",this.save),$(window).bind("beforeunload",this.beforeUnload),$(".country-search .country-box-holder").hide(),$(".country-search-list").css("border","none")}var t,a,n;return t=e,(a=[{key:"drawCheckboxes",value:function(){var e,t=m(this.map.countries);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.checked&&$(".country-"+a.id).prop("checked",!0)}}catch(e){t.e(e)}finally{t.f()}}},{key:"checkRegions",value:function(e,t){var a=this.countriesById[e];$(".country-"+e).prop("checked",t);var n,r=m(a.regions);try{for(r.s();!(n=r.n()).done;){var o=n.value;t||(o.checked=t,$(".country-"+o.id).prop("checked",!1))}}catch(e){r.e(e)}finally{r.f()}a.checked=t,null!==a.parent?this.map.drawCountry(a.parent):this.map.drawCountry(a),this.setSaved(!1),this.drawNumCountries()}},{key:"setSaved",value:function(e){this.saved=e,$("#btn-save-countries").prop("disabled",this.saved)}},{key:"drawNumCountries",value:function(){var e,t=0,a=m(this.map.countries);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.checked&&null==n.parent&&"("!=n.name.substr(0,1)&&(t+=1)}}catch(e){a.e(e)}finally{a.f()}$(".span-visited").html(t)}}])&&y(t.prototype,a),n&&y(t,n),e}(),k=a(18);function C(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var x=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.copyInviteCode=function(){v.a.copyTextToClipboard("https://www.jetpunk.com/groups/invite/"+a.inviteCode)},this.sendInvites=function(){var e=a.selected.map((function(e){return e.uid})),t=$("#txt-group-message").val();s.a.go({url:"/api/groups/send-group-invite.php",data:{users:JSON.stringify(e),message:t,group:a.groupId},loading:"Sending invitations",callback:function(){i.a.alert("Success","Your invitations have been sent"),a.remaining-=a.selected.length,a.selected=[],a.draw()}})},this.getInviteCode=function(){s.a.go({url:"/api/groups/get-group-invite-code.php",data:{group:a.groupId},loading:"Getting Invite Code",callback:function(e){a.inviteCode=e,$(".group-add-member-page .invite-url-holder").addClass("has-invite"),$(".group-add-member-page .invite-code").html("https://www.jetpunk.com/groups/invite/"+a.inviteCode)}})},this.launchSearch=function(){a.friendSearch.launch()},this.searchCallback=function(e){var t,n=C(a.selected);try{for(n.s();!(t=n.n()).done;){if(t.value.uid==e.uid)return}}catch(e){n.e(e)}finally{n.f()}a.selected.push(e),a.draw()},this.removeSelected=function(e){var t=$(e.target).closest(".selected-user").data("id");a.selected=a.selected.filter((function(e){return e.uid!=t})),a.draw()},t.user&&(this.page=t,this.selected=[],this.friendSearch=new k.a(t,this.searchCallback),this.remaining=t.data.remaining,this.inviteCode=t.data.inviteCode,this.groupId=t.data.groupId,this.draw(),$(".group-add-member-page").on("click",".btn-launch-friend-search",this.launchSearch),$(".group-add-member-page").on("click",".btn-send-invites",this.sendInvites),$(".group-add-member-page").on("click",".selected-user",this.removeSelected),$(".group-add-member-page").on("click",".show-remaining",this.showRemainingHelp),$(".group-add-member-page").on("click",".btn-get-invite-code",this.getInviteCode),$(".group-add-member-page").on("click",".copy-invite-code",this.copyInviteCode))}var t,a,n;return t=e,(a=[{key:"showRemainingHelp",value:function(){i.a.alert("Invite Limits","<p>You can only have a certain number of pending invitations open at a given time.</p><p>You'll be able to send more when time passes or when people accept your invites.</p>")}},{key:"drawRemaining",value:function(){var e=this.remaining-this.selected.length,t=e+" invites";0==this.remaining?t="no invites":1==e&&(t="1 invite"),$(".group-add-member-page .remaining").html("\n      You have <span class='link-like show-remaining'>".concat(t,"</span> remaining\n    ")).toggle(e<5),$(".btn-launch-friend-search").prop("disabled",0==e)}},{key:"drawSelected",value:function(){$(".btn-send-invites").prop("disabled",0==this.selected.length),$(".group-add-member-page .selected-users").toggle(0!=this.selected.length);var e=this.selected.map((function(e){return'<div class="selected-user" data-id='.concat(e.uid,">").concat(e.screenname,' <i class="far fa-times-circle"></i></div>')}));$(".group-add-member-page .selected-users").html(e.join(""))}},{key:"draw",value:function(){this.drawRemaining(),this.drawSelected()}}])&&z(t.prototype,a),n&&z(t,n),e}();var T=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createGroup=function(){var e=$(".group-create-content .group-name").val().trim(),t=$(".group-create-content .group-description").val();return""==e?(i.a.alert("Error","Name can't be blank"),!1):e.match(/[><]/)?(i.a.alert("Error","Can't have &lt; or &gt; in the group name"),!1):void s.a.go({url:"/api/groups/create-group.php",data:{name:e,description:t},callback:function(e){e="/groups/"+e,i.a.alert("Success","Your group has been created",(function(){return window.location=e}))}})},t.user&&(this.friends=t.data.friends,$(".group-create-content").on("click",".create-group",this.createGroup))};var I=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.acceptInvite=function(){s.a.go({url:"/api/groups/accept-group-url-invite.php",data:{url:a.inviteUrl},loading:"Accepting invite",callback:function(e){i.a.alert("Success","You are now a member of this group.",(function(){return window.location=e}))}})},this.inviteUrl=t.data.inviteUrl,null!=this.inviteUrl&&$(".group-invite-content").on("click",".btn-accept-invite",this.acceptInvite)};function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.launchUpdateUser=function(e){var t=$(e.target).data("member"),n=a.getMemberFromId(t),r=[];"owner"==a.group.userRole&&("member"==n.role&&r.push(["add-moderator","Make Moderator"]),"moderator"==n.role&&r.push(["remove-moderator","Remove as Moderator"]),r.push(["make-owner","Make Owner"])),r.push(["remove-member","Remove from Group"]);var o=(r=r.map((function(e){return'<div class="mb-3"><button class="blue '.concat(e[0],' width-180" data-member="').concat(t,'">').concat(e[1],"</button></div>")}))).join("");i.a.alert("Update Permissions for "+n.screenname,o,null,{hideFooter:!0})},this.removeMember=function(e){var t=$(e.target).data("member"),n=a.getMemberFromId(t);i.a.close(),i.a.choice("Remove User?","Remove ".concat(n.screenname," from this group?"),["No","Yes"],[null,function(){return a.removeMemberEx(n)}])},this.makeOwner=function(e){var t=$(e.target).data("member"),n=a.getMemberFromId(t);i.a.close(),i.a.choice("Give Up Ownership?"," <p>".concat(n.screenname," will be the new owner of the group, and you will no longer be the owner.</p>\n        <p>Are you sure?</p>"),["No","Yes"],[null,function(){return a.makeOwnerEx(n)}])},this.addModerator=function(e){var t=$(e.target).data("member"),n=a.getMemberFromId(t);i.a.close(),s.a.go({url:"/api/groups/add-moderator.php",data:{group:a.group.id,member:n.uid},callback:function(){i.a.alert("Success",n.screenname+" is now a moderator of this group",(function(){return location.reload()}))}})},this.removeModerator=function(e){var t=$(e.target).data("member"),n=a.getMemberFromId(t);i.a.close(),s.a.go({url:"/api/groups/remove-moderator.php",data:{group:a.group.id,member:n.uid},callback:function(){i.a.alert("Success",n.screenname+" has been removed as a moderator",(function(){return location.reload()}))}})},this.launchLeaveGroup=function(e){var t=a.group.id;i.a.choice("Leave Group?","You will not be able to rejoin unless you get another invite",["No","Yes"],[null,function(){return a.leaveGroup(t)}])},this.launchRemoveQuiz=function(e){var t=$(e.target).data("quiz");i.a.choice("Remove Quiz?","This will remove the quiz from the group.  It will not delete the quiz.",["No","Yes"],[null,function(){return a.removeQuiz(t)}])},this.removeQuiz=function(e){s.a.go({url:"/api/groups/remove-quiz-from-group.php",data:{quiz:e,group:a.group.id},type:"POST",callback:function(e){i.a.close(),i.a.alert("Success","This quiz has been removed.",(function(){return location.reload()}))}})},this.addQuiz=function(){var e=$(".url-to-add").val().trim();""==e&&i.a.alert("Error","Please enter the URL of the quiz you want to add"),s.a.go({url:"/api/groups/add-quiz-to-group.php",data:{url:e,group:a.group.id},type:"POST",callback:function(e){i.a.close(),i.a.alert("Success","This quiz has been added to the group",(function(){return location.reload()}))}})},this.createGroup=function(){var e=$(".group-create-content .group-name").val().trim(),t=$(".group-create-content .group-description").val();return""==e?(i.a.alert("Error","Name can't be blank"),!1):e.match(/[><]/)?(i.a.alert("Error","Can't have &lt; or &gt; in the group name"),!1):void s.a.go({url:"/api/groups/create-group.php",data:{name:e,description:t},callback:function(e){e="/groups/"+e,i.a.alert("Success","Your group has been created",(function(){return window.location=e}))}})},t.user&&(this.page=t,this.group=t.data.group,$(".group-page-content").on("click",".launch-add-quiz",this.launchAddQuiz),$(".group-page-content").on("click",".leave-group",this.launchLeaveGroup),$(".group-page-content").on("click",".launch-remove-quiz",this.launchRemoveQuiz),$(".group-page-content").on("click",".launch-update-user",this.launchUpdateUser),$(".group-page-page").on("click",".add-quiz",this.addQuiz),$(".group-page-page").on("click",".add-moderator",this.addModerator),$(".group-page-page").on("click",".remove-moderator",this.removeModerator),$(".group-page-page").on("click",".make-owner",this.makeOwner),$(".group-page-page").on("click",".remove-member",this.removeMember))}var t,a,n;return t=e,(a=[{key:"getMemberFromId",value:function(e){for(var t=0;t<this.group.members.length;t++){var a=this.group.members[t];if(a.uid==e)return a}}},{key:"removeMemberEx",value:function(e){s.a.go({url:"/api/groups/remove-member.php",data:{group:this.group.id,member:e.uid},callback:function(){i.a.alert("Success",e.screenname+" has been removed",(function(){return location.reload()}))}})}},{key:"makeOwnerEx",value:function(e){s.a.go({url:"/api/groups/change-owner.php",data:{group:this.group.id,member:e.uid},callback:function(){i.a.alert("Success",e.screenname+" is now the owner of this group",(function(){return location.reload()}))}})}},{key:"leaveGroup",value:function(e){s.a.go({url:"/api/groups/leave-group.php",data:{id:e},loading:"Leaving group...",callback:function(){i.a.alert("Success","You are no longer a member of this group",(function(){return window.location="/friends"}))}})}},{key:"launchAddQuiz",value:function(){i.a.alert("Add Quiz to Group",'\n      <div class="bold">Enter URL of quiz here</div>\n      <input type="text" class="full-width mt-2 url-to-add" placeholder="Quiz URL" />\n    ',null,{customFooter:'<button class="blue add-quiz">Add Quiz</button>'})}}])&&E(t.prototype,a),n&&E(t,n),e}(),q=a(8);var O=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.draw=function(){var e=parseInt($("#quiz-selector").val()),t=a.group,n=t.members,r=t.quizzes;if(0!=r.length){for(var o=null,i=0;i<r.length;i++)if(e==r[i].id){o=r[i];break}var s=!1;for(i=0;i<n.length;i++){(u=(c=n[i]).highScores[e]).numCorrect==o.numquestions&&(s=!0)}var l=[];for(i=0;i<n.length;i++){var c,u=(c=n[i]).highScores[e];(p=[]).push("<a href='/users/".concat(c.url,"'>").concat(c.screenname,"</a>")),p.push(u.numCorrect),s&&(u.numCorrect==o.numquestions?p.push(v.a.secondsToClock(u.timeUsed)):p.push("-")),l.push(p)}for(var d=[],h=0,f=l;h<f.length;h++){var p;p=(p=f[h]).map((function(e){return"<td>".concat(e,"</td>")})).join(""),d.push("<tr>"+p+"</tr>")}var g=["User","High Score"];s&&g.push("Best Time"),g=g.map((function(e,t){return'<th data-i="'.concat(t,'">').concat(e,"</th>")})).join("");var m='\n    <div class="super-table-container mt-5">\n      <table class="super-table">\n        <tr>\n          '.concat(g,"\n        </tr>\n        ").concat(d.join(""),"\n      </table>\n    </div>");$("#high-score-holder").html(m);new q.a(a.page,{props:[],propValues:[],initCol:0,initDir:-1,colTypes:[1,2,4]})}},t.user&&(this.page=t,this.group=t.data.group,this.draw(),this.sortCol=$("#quiz-selector").on("change",this.draw))};function L(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return U(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.copyInviteCode=function(){v.a.copyTextToClipboard("https://www.jetpunk.com/friends/invite/"+a.inviteCode)},this.sendInvites=function(){var e=a.selected.map((function(e){return e.uid})),t=$("#txt-friend-message").val();s.a.go({url:"/api/friends/send-friend-request.php",data:{users:JSON.stringify(e),message:t},loading:"Sending friend requests",callback:function(){i.a.alert("Success","Your friend requests have been sent"),a.remaining-=a.selected.length,a.selected=[],a.draw()}})},this.getInviteCode=function(){s.a.go({url:"/api/friends/get-friend-invite-code.php",loading:"Getting Invite Code",callback:function(e){a.inviteCode=e,$(".friend-add-page .invite-url-holder").addClass("has-invite"),$(".friend-add-page .invite-code").html("https://www.jetpunk.com/friends/invite/"+a.inviteCode)}})},this.launchSearch=function(){a.friendSearch.launch()},this.searchCallback=function(e){var t,n=L(a.selected);try{for(n.s();!(t=n.n()).done;){if(t.value.uid==e.uid)return}}catch(e){n.e(e)}finally{n.f()}a.selected.push(e),a.draw()},this.removeSelected=function(e){var t=$(e.target).closest(".selected-user").data("id");a.selected=a.selected.filter((function(e){return e.uid!=t})),a.draw()},t.user&&(this.page=t,this.selected=t.data.add,this.friendSearch=new k.a(t,this.searchCallback),this.remaining=t.data.remaining,this.inviteCode=t.data.inviteCode,this.draw(),$(".friend-add-page").on("click",".btn-launch-friend-search",this.launchSearch),$(".friend-add-page").on("click",".btn-send-invites",this.sendInvites),$(".friend-add-page").on("click",".selected-user",this.removeSelected),$(".friend-add-page").on("click",".show-remaining",this.showRemainingHelp),$(".friend-add-page").on("click",".btn-get-invite-code",this.getInviteCode),$(".friend-add-page").on("click",".copy-invite-code",this.copyInviteCode))}var t,a,n;return t=e,(a=[{key:"showRemainingHelp",value:function(){i.a.alert("Invite Limits","<p>You can only have a certain number of pending invitations open at a given time.</p><p>You'll be able to send more when time passes or when people accept your invites.</p>")}},{key:"drawRemaining",value:function(){var e=this.remaining-this.selected.length,t=e+" invites";0==this.remaining?t="no invites":1==e&&(t="1 invite"),$(".friend-add-page .remaining").html("\n      You have <span class='link-like show-remaining'>".concat(t,"</span> remaining\n    ")).toggle(e<5),$(".btn-launch-friend-search").prop("disabled",0==e)}},{key:"drawSelected",value:function(){$(".btn-send-invites").prop("disabled",0==this.selected.length),$(".friend-add-page .selected-users").toggle(0!=this.selected.length);var e=this.selected.map((function(e){return'<div class="selected-user" data-id='.concat(e.uid,">").concat(e.screenname,' <i class="far fa-times-circle"></i></div>')}));$(".friend-add-page .selected-users").html(e.join(""))}},{key:"draw",value:function(){this.drawRemaining(),this.drawSelected()}}])&&D(t.prototype,a),n&&D(t,n),e}();function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defriend=function(e){var t=$(e.target).data("uid"),n=a.friends.find((function(e){return e.uid==t}));i.a.close(),i.a.choice(o.a.translate("Defriend")+" "+n.screenname+"?",o.a.translate("<p>Warning: this action is permananent.</p><p>If you defriend someone, you will not be able to refriend them.</p>"),["Cancel","Defriend"],[null,function(){return a.confirmDefriend(n)}])},this.launchFriendModal=function(e){var t=$(e.target).closest(".friend").data("uid"),n=a.friends.find((function(e){return e.uid==t})),r="\n      <p>".concat(o.a.translate("You have been friends since")," ").concat(n.formatteddate).concat(o.a.translate("<i class='flang-dat'></i>."),"</p>\n      <p><span class='defriend' data-uid='").concat(t,"'>").concat(o.a.translate("defriend"),"</span></p>\n    ");i.a.alert(n.screenname,r)},this.acceptFriend=function(e){var t=$(e.target).closest(".request").data("uid"),a=$(e.target).closest(".request").data("screenname");s.a.go({url:"/api/friends/accept-request.php",data:{sentby:t},loading:"Accepting request",callback:function(){i.a.alert("Success",o.a.translate("You are now friends with")+" "+a+o.a.translate("<i class='flang-add'></i>."),(function(){return location.reload()}))}})},this.ignoreFriend=function(e){var t=$(e.target).closest(".request").data("uid"),n=$(e.target).closest(".request").data("screenname");i.a.choice(o.a.translate("Ignore")+" "+n+"?",o.a.translate("This user will not be able to send you any more friend requests."),["No","Yes"],[null,function(){return a.ignoreFriendEx(t,n)}])},this.declineFriend=function(e){var t=$(e.target).closest(".request").data("uid"),n=$(e.target).closest(".request").data("screenname");i.a.choice(o.a.translate("Decline")+" "+n+"?",o.a.translate("Declining this request allows the user to send another request."),["No","Yes"],[null,function(){return a.declineFriendEx(t,n)}])},this.acceptGroup=function(e){var t=$(e.target).closest(".invite").data("id");s.a.go({url:"/api/groups/accept-invite.php",data:{id:t},loading:"Accepting invite",callback:function(){i.a.alert("Success","You are now a member of this group",(function(){return location.reload()}))}})},this.declineGroup=function(e){var t=$(e.target).closest(".invite").data("id");i.a.choice("Decline Invite?","Declining this invite allows more invitations to be sent",["No","Yes"],[null,function(){return a.declineGroupEx(t)}])},this.ignoreGroup=function(e){var t=$(e.target).closest(".invite").data("id");i.a.choice("Ignore Request?","You will receive no more invites from this user or group",["No","Yes"],[null,function(){return a.ignoreGroupEx(t)}])},t.user&&(this.friends=t.data.friends,$(".friend-index-content").on("click",".btn-accept-friend",this.acceptFriend),$(".friend-index-content").on("click",".decline-friend",this.declineFriend),$(".friend-index-content").on("click",".ignore-friend",this.ignoreFriend),$(".friend-index-content").on("click",".show-all-friends",this.showAllFriends),$(".friend-index-content").on("click",".btn-user",this.launchFriendModal),$(".friend-index-page").on("click",".defriend",this.defriend),$(".friend-index-content").on("click",".btn-accept-group",this.acceptGroup),$(".friend-index-content").on("click",".decline-group",this.declineGroup),$(".friend-index-content").on("click",".ignore-group",this.ignoreGroup),$(".friend-index-content").on("click",".show-all-groups",this.showAllGroups))}var t,a,n;return t=e,(a=[{key:"confirmDefriend",value:function(e){s.a.go({url:"/api/friends/defriend.php",data:{user:e.uid},loading:"Defriending...",callback:function(){i.a.alert("Success",o.a.translate("You are no longer friends with")+" "+e.screenname+o.a.translate("<i class='flang-def'></i>."),(function(){return location.reload()}))}})}},{key:"showAllFriends",value:function(){$(".friend-list").addClass("show-all")}},{key:"showAllGroups",value:function(){$(".group-list").addClass("show-all")}},{key:"ignoreFriendEx",value:function(e,t){s.a.go({url:"/api/friends/ignore-request.php",data:{sentby:e},loading:"Ignoring user",callback:function(){i.a.alert("Success",o.a.translate("You have ignored")+" "+t+o.a.translate("<i class='flang-ign'></i>."),(function(){return location.reload()}))}})}},{key:"declineFriendEx",value:function(e,t){s.a.go({url:"/api/friends/delete-request.php",data:{sentby:e,type:"pending"},loading:"Declining user",callback:function(){i.a.alert("Success",o.a.translate("You have declined the request from")+" "+t+o.a.translate("<i class='flang-dec'></i>."),(function(){return location.reload()}))}})}},{key:"declineGroupEx",value:function(e){s.a.go({url:"/api/groups/delete-request.php",data:{id:e},loading:"Declining invitation",callback:function(){i.a.alert("Success","Invitation declined",(function(){return location.reload()}))}})}},{key:"ignoreGroupEx",value:function(e){s.a.go({url:"/api/groups/ignore-invite.php",data:{id:e},loading:"Ignoring...",callback:function(){i.a.alert("Success","Invites from this group and user will now be ignored",(function(){return location.reload()}))}})}}])&&N(t.prototype,a),n&&N(t,n),e}();var M=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.acceptInvite=function(){s.a.go({url:"/api/friends/accept-friend-url-invite.php",data:{url:a.invite.url},loading:"Accepting invite",callback:function(){i.a.alert("Success",o.a.translate("You are now friends with")+" "+a.invite.screenname+o.a.translate("<i class='flang-add'></i>."),(function(){return window.location="/friends/"}))}})},this.invite=t.data.invite,null!=this.invite&&$(".friend-invite-content").on("click",".btn-accept-invite",this.acceptInvite)};function P(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var F=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.removeIgnored=function(e){var t=$(e.target).closest(".user").data("uid"),n=$(e.target).closest(".user").data("screenname");i.a.choice("Remove Ignored","Removing this user from your ignored list will allow them to send you another friend request.",["No","Yes"],[null,function(){return a.removeEx(t,n)}])},t.user&&$(".friend-index-content").on("click",".remove-ignore",this.removeIgnored)}var t,a,n;return t=e,(a=[{key:"removeEx",value:function(e,t){s.a.go({url:"/api/friends/delete-request.php",data:{sentby:e,type:"ignored"},loading:"Removing...",callback:function(){i.a.alert("Success",o.a.translate("You have removed")+" "+t+" "+o.a.translate("from your ignored users"),(function(){return location.reload()}))}})}}])&&P(t.prototype,a),n&&P(t,n),e}();function Q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Y=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.toggleCaret=function(e){var t=$(e.target).closest(".group-header").data("id");$("#"+t).toggle(),$("#"+t).is(":visible")?$(".group-header[data-id="+t+"] .caret").html('<i class="fa fa-angle-down" data-id="'+t+'"></i>'):$(".group-header[data-id="+t+"] .caret").html('<i class="fa fa-angle-up" data-id="'+t+'"></i>')},this.downloadTable=function(e){var t=$(e.target).data("id"),n=a.getDataTableText(t),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),r.setAttribute("download",t+".txt"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},this.copyTable=function(e){var t=$(e.target).data("id"),n=a.getDataTableText(t);i.a.alert("Tab-Delimited Text to Copy","<textarea>".concat(n,"</textarea>"),null,{customClass:"modal-copy-text"}),setTimeout((function(){$(".modal-copy-text textarea").select()}),100)},this.page=t,$(".data-controls").on("click",".download",this.downloadTable),$(".data-controls").on("click",".copy",this.copyTable),$(".info-page-content").on("click",".group-header",this.toggleCaret)}var t,a,n;return t=e,(a=[{key:"getDataTableText",value:function(e){var t=this.page.data.tables[e];return(t=t.map((function(e){return e.join("\t")}))).join("\n")}}])&&Q(t.prototype,a),n&&Q(t,n),e}();var H=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayErrors=function(e){var t=e.error?e.error.message:"";$("#card-errors").text(t)},this.submitPayment=function(){a.stripe.createToken(a.card).then((function(e){e.error?$("#card-errors").text(e.error.msg):a.stripeTokenHandler(e.token.id)}))},this.stripeTokenHandler=function(e){s.a.go({url:"/api/purchase-membership.php",data:{token:e},loading:"Submitting payment",callback:function(){$(".desktop-content, .phone-content").html('\n          <h1>Purchase Complete</h1>\n          <div class="blurb">\n            <p>Thank you for becoming a JetPunk premium member.</p>\n            <p>Please enjoy your five years of ad-free quizzes!</p>\n          </div>')}})},this.page=t,this.stripe=Stripe("pk_live_TCIWXlVp482ie0gPJKpMYC0f"),this.card=this.stripe.elements().create("card"),this.card.mount("#card-element"),this.card.addEventListener("change",this.displayErrors),$("#btn-submit-payment").on("click",this.submitPayment)};function B(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.beforeUnload=function(){if(JSON.stringify(a.collectObject())!=JSON.stringify(a.initialSettings))return"You have unsaved changes! Make sure to hit the Submit button."},this.manageSubscriptions=function(){var e=a.collectObject();s.a.go({url:"/api/subscription-changes.php",data:e,loading:"Saving changes",callback:function(){a.initialSettings=e,i.a.alert("Success","Your subscriptions have been updated")}})},this.page=t,this.initialSettings=this.collectObject(),$(window).bind("beforeunload",this.beforeUnload),$("#btn-submit-manage").on("click",this.manageSubscriptions)}var t,a,n;return t=e,(a=[{key:"collectObject",value:function(){var e={frequency:$("#sel-sub-frequency").val(),quizmail:$("#sel-quizmail").val(),busers:[],qusers:[]};return $(".sub-check-q").each((function(t,a){$(a).is(":checked")&&e.qusers.push($(a).data("user"))})),$(".sub-check-b").each((function(t,a){$(a).is(":checked")&&e.busers.push($(a).data("user"))})),e.qusers.sort(),e.busers.sort(),e}}])&&B(t.prototype,a),n&&B(t,n),e}();function W(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var V=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.beforeUnload=function(){if(!a.issaved)return"You have unsaved changes!"},this.circleHover=function(e){if($(".svg-hover").html("&nbsp;"),$(e.target).hasClass("zoomable-circle")){var t=e.target.id;a.map[t]&&$(".svg-hover").html(a.map[t])}},this.updateSlider=function(){var e=parseInt(100*$("#style-input-o").val()),t=parseInt(2*$("#style-input-sw").val())/2;$("#opacity-value").html(e+"%"),$("#stroke-width-value").html(t+"px")},this.switchMode=function(){a.mode=parseInt($("#sel-background").val());var e=$("#sel-background option[value="+a.mode+"]").attr("data-fn");a.mapZoomer.unbind(),$(".svg-holder").hide(),e?s.a.go({url:"/api/get-svg-contents.php",data:{fn:e},loading:"Loading SVG...",timeoutMsg:"Timeout. SVG not loaded, please try again.",callback:function(e){$("#svg-display-"+a.mode).html(e.svg).show(),$("#sel-background option[value="+a.mode+"]").removeAttr("data-fn"),a.SVGdrawn()}}):($("#svg-display-"+a.mode).show(),a.SVGdrawn())},this.SVGdrawn=function(){$("#svg-display-"+a.mode+" .zoomable-circle").hide(),a.mapZoomer=new d.a(a.page)},this.drawDots=function(){a.map={},1!=a.mapZoomer.zoomLevel&&a.mapZoomer.unzoom();for(var e,t=$("#cities").val().split("\n"),n=[],r=[],o={},i=0;i<t.length;i++){var s=t[i].trim();if(""!=s){var l=s.split("\t");if(l.length<3)return void a.error(i,"Must have at least 3 columns");var c={};c.name=l[0].trim();var u=a.getId(c.name);c.id=u;for(var d=2;c.id in o;)c.id=u+"-"+d,d+=1;if(o[c.id]=!0,a.map[c.id]=c.name,c.lat=parseFloat(l[1]),isNaN(c.lat))return void a.error(i,"Latitude must be a number");if(c.lat<-90||c.lat>90)return void a.error(i,"Latitude must be between -90 and 90");if(c.lon=l[2],isNaN(c.lon))return void a.error(i,"Longitude must be a number");if(c.lon<-180||c.lon>180)return void a.error(i,"Longitude must be between -180 and 180");c.dotSize=4,l.length>=4&&(c.dotSize=parseFloat(l[3]),isNaN(c.dotSize)&&(c.dotSize=4)),n.push(c),r.push([c.name,c.lat,c.lon,c.dotSize,c.id].join("\t"))}}switch($("#cities").val(r.join("\n")),a.mode){case 2:case 20:e=d3.geo.mercator();break;default:e=d3.geo.equirectangular()}d3.geo.path().projection(e);var h=d3.select("#svg-display-"+a.mode+" svg"),f="fill:#"+$("#style-input-bgc").val()+";stroke:#"+$("#style-input-c").val()+";fill-opacity:"+$("#style-input-o").val()+";stroke-width:"+$("#style-input-sw").val()+"px",p=h.select("style");p?(p=p[0][0].innerHTML).indexOf(".zoomable-circle")>-1&&(p=p.replace(/[.]zoomable-circle[{][^}]*[}]/gi,"")):p="",h.select("style").remove(),h.insert("style",":first-child").text(p+".zoomable-circle{"+f+"}"),h.selectAll(".zoomable-circle").remove(),h.selectAll(".map-hidden").remove();for(var g=0,v=n;g<v.length;g++){var m=v[g],b=a.calculate(m.lat,m.lon,e);b=a.shrinkCenter(b),h.append("circle").attr("r",m.dotSize).attr("class","zoomable-circle").attr("cx",b.x).attr("cy",b.y).attr("id",m.id)}},this.downloadSvg=function(){switch(a.mode){case 1:a.defaultfn="jetpunk-world-map";break;case 2:a.defaultfn="jetpunk-usa-map";break;case 3:a.defaultfn="jetpunk-africa-map";break;case 4:a.defaultfn="jetpunk-asia-map";break;case 5:a.defaultfn="jetpunk-europe-map";break;case 6:a.defaultfn="jetpunk-north-america-map";break;case 7:a.defaultfn="jetpunk-oceania-map";break;case 8:a.defaultfn="jetpunk-south-america-map";break;case 20:a.defaultfn="blank-mercator-map";break;case 21:a.defaultfn="blank-equirectangular-map"}i.a.alert("Download SVG",'<p>Please enter a file name for this SVG. The file name must contain only alphanumeric characters, "-" and spaces. If the file name is invalid, the default will be used.</p>\n      <input type="text" id="txt-svg-filename" value="'.concat(a.defaultfn,'">'),(function(){return a.downloadSvgEx()}))},this.downloadSvgEx=function(){if(""!=a.fn){a.fn.match(/[^a-z0-9- ]/gi)&&(a.fn=a.defaultfn),1!=a.mapZoomer.zoomLevel&&a.mapZoomer.unzoom();var e=$("<div>").append($("#svg-display-"+a.mode+" svg").clone()).html(),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download",a.fn+".svg"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),a.issaved=!0}},this.page=t,this.mapZoomer=new d.a(this.page),this.mode=1,this.fn="",this.defaultfn="",this.map={},$("#svg-display-"+this.mode).show(),$("#btn-submit-place-dots").on("click",this.drawDots),$("#btn-download-svg").on("click",this.downloadSvg),$("#sel-background").on("change",this.switchMode),$(".slider").on("input",this.updateSlider),$(".page").on("input","#txt-svg-filename",(function(){return a.fn=$("#txt-svg-filename").val()})),$(".svg-wrapper").on("mouseover",this.circleHover),$(".svg-wrapper").on("mouseout",this.unhover),this.issaved=!0,$("#cities").on("input",(function(){return a.issaved=!1})),$(window).bind("beforeunload",this.beforeUnload)}var t,a,n;return t=e,(a=[{key:"unhoverPath",value:function(){$(".svg-hover").html("&nbsp;")}},{key:"getId",value:function(e){return e=(e=(e=v.a.normalizeWords(e)).replace(/[ ]+/g,"-")).toLowerCase()}},{key:"shrinkCenter",value:function(e){return{x:e.x.toFixed(3),y:e.y.toFixed(3)}}},{key:"error",value:function(e,t){i.a.alert("Error at Line "+(e+1),t)}},{key:"calculate",value:function(e,t,a){var n=a([t,e]);switch(e=n[0],t=n[1],this.mode){case 1:return this.adjust1(e,t);case 2:return this.adjust2(e,t);case 3:return this.adjust3(e,t);case 4:return this.adjust4(e,t);case 5:return this.adjust5(e,t);case 6:return this.adjust6(e,t);case 7:return this.adjust7(e,t);case 8:return this.adjust8(e,t);case 20:return this.adjust20(e,t);case 21:return this.adjust21(e,t)}}},{key:"adjust1",value:function(e,t){return(e=.859659643*e-32.13952889)<0&&(e+=810),{x:e,y:t=1.28*t-59}}},{key:"adjust2",value:function(e,t){return t=4*t-398.8347622,(e=4*e-594.5983356)<0&&t>0&&(e+=479.3,t-=83.5),e<0&&t<0&&(e=e/3.4+134.5,t=t/3.4+370),{x:e,y:t}}},{key:"adjust3",value:function(e,t){return{x:e=2.0632*e-837.2,y:t=2.5606*t-382.7}}},{key:"adjust4",value:function(e,t){return{x:e=1.8053*e-984.7,y:t=2.3065*t-235.7}}},{key:"adjust5",value:function(e,t){return t=4.5141*t-275.8,(e=3.0283*e-1328.9)<20&&t<200&&(e+=84.5,t-=44.5),{x:e,y:t}}},{key:"adjust6",value:function(e,t){return(e=1.719*e-54.3)<0&&(e+=810),{x:e,y:t=2.56*t-118}}},{key:"adjust7",value:function(e,t){return(e=1.8913*e-1455.6)<0&&(e+=1782),{x:e,y:t=2.8157*t-598.7}}},{key:"adjust8",value:function(e,t){return{x:e=2.0632*e-475.8,y:t=2.5606*t-547.7}}},{key:"adjust20",value:function(e,t){return(e=.8*e-7.00888156922483)<0&&(e+=753.982),{x:e,y:t=.8*t+92.34952644590533}}},{key:"adjust21",value:function(e,t){return(e=.8*e-7.008881569224832)<0&&(e+=753.982),{x:e,y:t=.8*t-32.44839180854438}}}])&&W(t.prototype,a),n&&W(t,n),e}();var J=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keydown=function(e){13==e.which&&a.resetPassword()},this.resetPassword=function(){var e=$("#txt-reset-password1").val(),t=$("#txt-reset-password2").val(),n=a.page.login.getPasswordError(e,t);n?i.a.alert("Error",n):s.a.go({url:"/api/user-actions.php",data:{action:"reset-password",password:e,verify:a.page.data.verify},loading:"Changing password",callback:function(){i.a.alert("Success","Your password has been changed",(function(){return window.location="/"}))}})},this.page=t,$("#btn-reset-password").on("click",this.resetPassword),$("#txt-reset-password2").on("keydown",this.keydown)};function Z(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return K(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popState=function(e){a.tab=""==document.location.pathname.substr(11)?"menu":document.location.pathname.substr(11),a.selectTab(!0)},this.selectTab=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];$(".fixed").removeClass("fixed"),$(".tab").hide(),$("#"+a.tab+".tab").show(),a.loadImages(),$(window).scrollTop(0);var t="menu"==a.tab?"":a.tab;e?history.replaceState(null,"","/svg-guide/"+t):history.pushState({state:"dummyState"},"","/svg-guide/"+t)},this.clickTab=function(e){a.tab=$(e.target).closest(".tab-button").data("id"),a.selectTab()},this.clickContentsLink=function(e){var t=$(e.target).data("id");a.scrollToId(t)},this.scrollToId=function(e){var t="top"==e?$("h1").offset().top:$("#"+e).offset().top;"phone"==a.page.device&&(t-=75),$("html, body").animate({scrollTop:t},700,"swing")},this.clickImage=function(e){var t=$(e.target).closest("img").prop("src");i.a.alert("Image",'<img src="'.concat(t,'">'),null,{hideFooter:!0,customClass:"svg-guide-image-modal"})},this.clickHeader=function(e){var t=$(e.target).closest("h2").parent().prop("id"),n="/svg-guide/"+a.tab+"/"+t;history.replaceState(null,"",n)},this.scroll=function(){if(0!=$(".back-button:visible").length){var e=$(window).scrollTop();0==a.menuTop&&(a.menuTop=$(".back-button:visible").offset().top),e>a.menuTop-20?($(".tab:visible .back-button").addClass("fixed"),$(".tab:visible .title-row h1").addClass("fixed"),$(".tab:visible .to-top").addClass("fixed")):($(".fixed").removeClass("fixed"),a.menuTop=0)}},this.loadImages=function(){var e,t=Z($(".tab:visible img"));try{for(t.s();!(e=t.n()).done;){var n=e.value,r=$(n).data("src");$(n).prop("src",a.baseUrl+r+".png").removeAttr("data-src")}}catch(e){t.e(e)}finally{t.f()}},this.page=t,this.tab=t.data.tab,this.baseUrl=t.data.baseUrl,this.menuTop=0,$(".svg-guide-page").on("click",".tab-button",this.clickTab),$(".svg-guide-page").on("click",".contents-link",this.clickContentsLink),$(".svg-guide-page .tab").on("click","img",this.clickImage),$(".svg-guide-page").on("click","h2",this.clickHeader),$(window).on("scroll",this.scroll),this.selectTab(!0),t.data.jumpId&&this.scrollToId(t.data.jumpId),$(window).on("popstate",this.popState)};var X=function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.unsubscribe=function(){$("#btn-unsubscribe-all").prop("disabled",!0),s.a.go({url:"/api/unsubscribe-all.php",data:{verify:a.page.data.verify},loading:"Unsubscribing",callback:function(){$(".unsubscribe-content .msg").html("<p>You have been completely unsubscribed.</p>")},errCallback:function(){i.a.alert("Error Unsubscribing","<p>There was an error unsubscribing.</p><p>Please contact us.</p>")}})},this.page=t,$("#btn-unsubscribe-all").on("click",this.unsubscribe)},ee=a(16);function te(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ae=function(){function e(t,a){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.drawYearSelector=function(){for(var e=(new Date).getFullYear(),t=[];e>=2016;){var a=e==n.year?"selected":"";t.push("<option ".concat(a,' value="').concat(e,'">').concat(e,"</option>")),e-=1}return'\n      <select id="year-selector-'.concat(n.id,'">\n        ').concat(t.join(""),"\n      </select>")},this.drawMonthSelector=function(){for(var e=[],t=1;t<=12;t++){var a=t==n.month?"selected":"",r=ee.a.getMonthName(t);e.push("<option ".concat(a,' value="').concat(t,'">').concat(r,"</option>"))}return'\n      <select id="month-selector-'.concat(n.id,'">\n        ').concat(e.join(""),"\n      </select>")},this.drawDaySelector=function(){for(var e=ee.a.getMaxDays(n.year,n.month),t=[],a=1;a<=e;a++){var r=a==n.day?"selected":"";t.push("<option ".concat(r,' value="').concat(a,'">').concat(a,"</option>"))}return'\n      <select id="day-selector-'.concat(n.id,'">\n        ').concat(t.join(""),"\n      </select>")},this.changeDay=function(e){n.day=parseInt(e.target.value)},this.changeMonth=function(e){n.month=parseInt(e.target.value);var t=ee.a.getMaxDays(n.year,n.month);n.day=n.day>t?t:n.day,n.redraw()},this.changeYear=function(e){n.year=parseInt(e.target.value);var t=ee.a.getMaxDays(n.year,n.month);n.day=n.day>t?t:n.day,n.redraw()},this.draw=function(){return'\n      <div class="date-selector" id="date-selector-'.concat(n.id,'">\n        ').concat(n.drawInside(),"\n      </div>")},this.year=a.year,this.month=a.month,this.day=a.day,this.id=v.a.getUniqueId(),$("html").on("change","#day-selector-"+this.id,this.changeDay),$("html").on("change","#month-selector-"+this.id,this.changeMonth),$("html").on("change","#year-selector-"+this.id,this.changeYear)}var t,a,n;return t=e,(a=[{key:"getDate",value:function(){return{year:this.year,month:this.month,day:this.day}}},{key:"drawInside",value:function(){var e=this.drawYearSelector(),t=this.drawMonthSelector(),a=this.drawDaySelector();return"".concat(t," ").concat(a," ").concat(e)}},{key:"redraw",value:function(){var e=this.drawInside();$("#date-selector-".concat(this.id)).html(e)}}])&&te(t.prototype,a),n&&te(t,n),e}();function ne(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ie=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.generateSingleDayReport=function(){var e=a.dateSelector1.getDate(),t=ee.a.getYesterday();ee.a.compareDates(e,t)>0?$("#single-day-error-line").html("Date must be before today"):a.analytics.loadData({mode:2,date:ee.a.getFormattedDate(e)})},this.generateQuizReport=function(){-1!=a.selectedQuiz?a.analytics.loadData({mode:3,quiz:a.selectedQuiz}):$("#quiz-error-line").html("Please select a quiz").show()},this.generateUserReport=function(){a.analytics.loadData({mode:4})},this.launch=function(){i.a.alert("Configure Analytics Report",'\n      <p>\n        Select the type of report you\'d like to generate, then configure the\n        options and click the button to generate it.\n      </p>\n      <p>\n        <b>Select Report Type:</b>\n        <select id="sel-report-type">\n          <option value="init">Choose Type</option>\n          <option value="single">Single Day Report</option>\n          <option value="quiz">Single Quiz Report</option>\n          <option value="userbyday">Account by Day</option>\n        </select>\n      </p>\n      <div class="divider"></div>\n      <div class="historical-body"></div>',null,{hideFooter:!0,customClass:"configure-historical-modal"}),a.drawModalBody("init")},this.selectReportType=function(e){a.drawModalBody(e.target.value)},this.selectQuiz=function(e){a.selectedQuiz=$(e.target).data("id"),$("#ua-quiz-search .selected").removeClass("selected"),$(e.target).addClass("selected"),$("#quiz-error-line").hide()},this.search=function(e){if(v.a.normalizeString(e.target.value).length<2)return $("#ua-quiz-search").html('<div class="no-results">Use the box above to search for quizzes</div>'),void(a.selectedQuiz=-1);var t,n=v.a.normalizeWords(e.target.value).split(" "),r=[],o=ne(a.searchQuizzes);try{for(o.s();!(t=o.n()).done;){var i=t.value;a.quizMatches(i,n)&&r.push(i)}}catch(e){o.e(e)}finally{o.f()}if(r.sort((function(e,t){return e.title==t.title?0:e.title<t.title?-1:1})),0==r.length)return $("#ua-quiz-search").html('<div class="no-results">None found</div>'),void(a.selectedQuiz=-1);for(var s=!1,l=[],c=0,u=r;c<u.length;c++){var d="quiz";(i=u[c]).id==a.selectedQuiz&&(s=!0,d="quiz selected"),l.push('<div class="'.concat(d,'" data-id="').concat(i.id,'">').concat(i.title,"</div>"))}s||(a.selectedQuiz=-1),$("#ua-quiz-search").html(l.join("\n"))},this.analytics=t,this.page=t.page,this.searchQuizzes=this.page.data.quizTitles,this.selectedQuiz=-1;var n,r=ne(this.searchQuizzes);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.matchWords=v.a.normalizeWords(o.title).split(" ")}}catch(e){r.e(e)}finally{r.f()}$(".user-analytics-page").on("change","#sel-report-type",this.selectReportType),$(".user-analytics-page").on("click","#btn-generate-single-day-report",this.generateSingleDayReport),$(".user-analytics-page").on("click","#btn-generate-quiz-report",this.generateQuizReport),$(".user-analytics-page").on("click","#btn-generate-user-report",this.generateUserReport),$(".user-analytics-page").on("input","#txt-ua-quiz-search",this.search),$(".user-analytics-page").on("click","#ua-quiz-search .quiz",this.selectQuiz)}var t,a,n;return t=e,(a=[{key:"quizMatches",value:function(e,t){for(var a=Object.assign([],e.matchWords),n=0;n<t.length;n++){for(var r=t[n],o=!1,i=0;i<a.length;i++)if(0==a[i].indexOf(r)){o=!0,a.splice(i,1);break}if(!o)return!1}return!0}},{key:"drawModalBody",value:function(e){var t="";"init"==e&&(t='<p class="please-select-option">Please select an option above.</p>'),"single"==e&&(this.dateSelector1=new ae(this,ee.a.getYesterday()),t="\n        <p>\n          See a performance report of all your quizzes on a particular day.\n        </p>\n        ".concat(this.dateSelector1.draw(),'\n        <button class="blue" id="btn-generate-single-day-report">Generate Report</button>\n        <div id="single-day-error-line" class="error-line"></div>\n      ')),"quiz"==e&&(this.selectedQuiz=-1,t='\n        <p>\n          See the performance of over time of a single quiz. Use the search bar\n          below to find the quiz you want, then click to select it.\n        </p>\n        <div id="ua-quiz-search-outer">\n          <input type="text" id="txt-ua-quiz-search" placeholder="Search for a quiz">\n          <div id="ua-quiz-search">\n            <div class="no-results">Use the box above to search for quizzes</div>\n          </div>\n        </div>\n        <button class="blue" id="btn-generate-quiz-report">Generate Report</button>\n        <div id="quiz-error-line" class="error-line"></div>\n        '),"userbyday"==e&&(t='<button class="blue" id="btn-generate-user-report">Generate Report</button>'),$(".configure-historical-modal .historical-body").html(t)}}])&&oe(t.prototype,a),n&&oe(t,n),e}();function se(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return le(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e,t,a){return t&&ue(e.prototype,t),a&&ue(e,a),e}function he(e){var t=v.a.getQuizUrl(e.user,e.url),a=1==e.searchlevel?'<i class="fa fa-star"></i> ':"";return"\n    <tr>\n      <td>".concat(e.timestaken.toLocaleString(),"</td>\n      <td>").concat(a,'<a href="').concat(t,'">').concat(e.title,"</a></td>\n    </tr>")}function fe(e){var t=e.map(he);return'\n    <table class="quizzes-table">\n      <tr>\n        <th>#</th>\n        <th>Quiz</th>\n      </tr>\n      '.concat(t.join(""),"\n    </table>")}var pe=function(){function e(t){var a=this;ce(this,e),this.goPrevNextDay=function(e){var t=$(e.target).data("date");a.loadData({mode:2,date:t})},this.chartsLoadedCallback=function(){a.chartsLoaded=!0,a.waitingForChartLoad&&(a.waitingForChartLoad(),a.waitingForChartLoad=null)},this.switchTab=function(e){var t=$(e.target).data("tab");a.tab!=t&&(a.tab=t,a.draw())},this.draw=function(){$("#tab-table-div .selected").removeClass("selected"),$("#tab-selector-"+a.tab).addClass("selected"),$(".ua-tab.selected").removeClass("selected"),$("#tab-content-"+a.tab).addClass("selected"),a.tabIsDrawn[a.tab]||a.loadData({mode:a.tab})},this.chartsLoaded=!1,this.waitingForChartLoad=null,"undefined"!=typeof google&&(google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(this.chartsLoadedCallback)),this.page=t,this.initialQuiz=t.data.initialQuiz,this.tab=0,this.tabIsDrawn=[!1,!1,!0],this.modal=new ie(this),this.initalQuizCallback=null,this.initialQuiz&&(this.tab=2),this.draw(),this.initialQuiz&&this.loadData({mode:3,quiz:this.initialQuiz}),$("#tab-table-div").on("click",".tab",this.switchTab),$(".user-analytics-page").on("click","#btn-configure-report",this.modal.launch),$(".user-analytics-page").on("click",".day-before, .day-after",this.goPrevNextDay)}return de(e,[{key:"loadData",value:function(e){var t=this;s.a.go({url:"/api/get-user-analytics.php",data:{data:JSON.stringify(e)},loading:"Loading data...",callback:function(a){switch(i.a.close(),e.mode){case 0:t.drawToday(a);break;case 1:t.drawYesterday(a);break;case 2:t.drawHistoricalDay(a);break;case 3:t.drawQuizHistory(a);break;case 4:t.drawAccountHistory(a)}}})}},{key:"drawDateNav",value:function(e){if(e.yesterday||e.tomorrow){var t=e.yesterday?'<div data-date="'.concat(e.yesterday,'" class="day-before link-like">&lt;&lt; Day Before</div>'):"",a=e.tomorrow?'<div data-date="'.concat(e.tomorrow,'" class="day-after link-like">Day After &gt;&gt;</div>'):"";return'\n        <div class="date-nav">\n          '.concat(t,"\n          ").concat(a,"\n        </div>")}return""}},{key:"drawDay",value:function(e){var t,a,n=e.quizzes,r=e.sumForDay,o=e.sumDayBefore,i=e.serverTime,s=e.newQuizzes;0==o?(t=0==r?"+ 0%":"+ ∞",a="positive"):(t=100*(r/o-1))>=0?(t="+"+t.toFixed(2)+"%",a="positive"):(t=t.toFixed(2)+"%",a="negative");var l=this.drawDateNav(e),c=new ve(n);s=this.drawNewQuizzes(n,s);return'\n      <div class="blurb">\n        An overview of your account for '.concat(i,"\n      </div>\n      ").concat(l,'\n      <table class="taken-table">\n        <tr>\n          <th>Quizzes taken that day</th>\n          <td class="takes">').concat(r.toLocaleString(),'</td>\n        </tr>\n        <tr>\n          <th>Change from day before</th>\n          <td class="change ').concat(a,'">').concat(t,"</td>\n        </tr>\n      </table>\n      ").concat(c.draw(),"\n      ").concat(s,"\n      ")}},{key:"drawYesterday",value:function(e){var t=this.drawDay(e);$("#tab-content-1").html(t),this.tabIsDrawn[this.tab]=!0}},{key:"drawHistoricalDay",value:function(e){var t=this.drawDay(e);$("#historical-report-content").html(t)}},{key:"drawNewQuizzes",value:function(e,t){var a,n=[],r=se(t);try{for(r.s();!(a=r.n()).done;){n[a.value]=!0}}catch(e){r.e(e)}finally{r.f()}var o,i=[],s=se(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;n[l.id]&&i.push(l)}}catch(e){s.e(e)}finally{s.f()}if(0==i.length)return"";i.sort((function(e,t){return e.timestaken==t.timestaken?v.a.normalizeWords(e.title)>v.a.normalizeWords(t.title)?-1:1:e.timestaken>t.timestaken?-1:1}));var c=fe(i);return"\n      <div class='new-quizzes'>\n        <div class=\"header\">New and Updated Quizzes</div>\n        ".concat(c,"\n      </div>\n    ")}},{key:"drawToday",value:function(e){var t,a=e.quizzes,n=e.newQuizzes,r=e.serverTime,o=e.overallTakes,i=0,s=se(a);try{for(s.s();!(t=s.n()).done;){i+=t.value.timestaken}}catch(e){s.e(e)}finally{s.f()}var l=new ve(a),c=(n=this.drawNewQuizzes(a,n),'\n      <div class="blurb">\n        Real-time information on your quizzes as of '.concat(r,' <small>(server time)</small>\n      </div>\n      <table class="taken-table">\n        <tr>\n          <th>Total takes all-time</th>\n          <td class="takes">').concat(o.toLocaleString(),'</td>\n        </tr>\n        <tr>\n          <th>Takes so far today</th>\n          <td class="takes">').concat(i.toLocaleString(),"</td>\n        </tr>\n      </table>\n      ").concat(l.draw(),"\n      ").concat(n,"\n    "));$("#tab-content-0").html(c),this.tabIsDrawn[this.tab]=!0}},{key:"drawQuizHistory",value:function(e){var t=new ge(this.page,e.dates),a=e.quiz,n=a.searchlevel,r=a.title,o=a.url,i=a.user,s=(o=v.a.getQuizUrl(i,o),'\n      <div class="quiz-header">\n        <span>Selected Quiz</span> '.concat(1==n?'<i class="fa fa-star"></i> ':"",' <a href="').concat(o,'">').concat(r,"</a>\n      </div>\n      ").concat(t.draw(),"\n    "));$("#historical-report-content").html(s),this.chartsLoaded?t.loadChart():this.waitingForChartLoad=function(){t.loadChart()}}},{key:"drawAccountHistory",value:function(e){var t=new ge(this.page,e),a='\n      <div class="quiz-header">\n        Account History by Day\n      </div>\n      '.concat(t.draw(),"\n    ");$("#historical-report-content").html(a),this.chartsLoaded?t.loadChart():this.initialQuizCallback=function(){t.loadChart()}}}]),e}(),ge=function(){function e(t,a){var n=this;ce(this,e),this.changeNumDays=function(e){n.num=parseInt(e.target.value),n.drawChart(),n.redrawTable()},this.changeMode=function(e){n.mode=parseInt(e.target.value),n.drawChart()},this.page=t,this.dates=a,this.num=30,this.id=v.a.getUniqueId(),this.mode=1,$(".user-analytics-page").on("change","#sel-num-days-"+this.id,this.changeNumDays),$(".user-analytics-page").on("change","#sel-display-mode-"+this.id,this.changeMode)}return de(e,[{key:"drawChart",value:function(){var e=this.dates;e.length>this.num&&-1!=this.num&&(e=e.slice(e.length-this.num));var t,a=[],n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=ee.a.parseFormattedDate(r.date),i=1==this.mode?r.taken:r.overall;a.push([new Date(o.year,o.month-1,o.day),i])}}catch(e){n.e(e)}finally{n.f()}var s=new google.visualization.DataTable;s.addColumn("date","Day"),s.addColumn("number","# Takes"),s.addRows(a);this.chart.draw(s,{vAxis:{title:"Times Taken",gridlines:{count:5}},hAxis:{title:"Date",format:"MMM dd, YYYY"},legend:"none",height:300,width:"100%"})}},{key:"loadChart",value:function(){this.chart=new google.visualization.AreaChart(document.getElementById("chart-div-"+this.id)),this.drawChart(),$("#sel-num-days-"+this.id).prop("disabled",!1),$("#sel-display-mode-"+this.id).prop("disabled",!1)}},{key:"drawRow",value:function(e){return"\n      <tr>\n        <td>".concat(e.date,"</td>\n        <td>").concat(e.taken.toLocaleString(),"</td>\n        <td>").concat(e.overall.toLocaleString(),"</td>\n      </tr>")}},{key:"drawTable",value:function(){var e=Object.assign([],this.dates);e.length>this.num&&-1!=this.num&&(e=e.slice(e.length-this.num)),e.reverse();var t=e.map(this.drawRow);return'\n      <table class="date-table">\n        <tr>\n          <th>Date</th>\n          <th>Taken</th>\n          <th>Overall</th>\n        </tr>\n        '.concat(t.join(""),"\n      </table>\n    ")}},{key:"redrawTable",value:function(){$("#table-div-".concat(this.id)).html(this.drawTable())}},{key:"draw",value:function(){var e=this.drawTable();return'\n    <div class="date-history-display" id="date-history-display-'.concat(this.id,'">\n      <div class="selector-controls">\n        <select id="sel-num-days-').concat(this.id,'" disabled>\n          <option value="30">30 days</option>\n          <option value="90">90 days</option>\n          <option value="-1">Max</option>\n        </select>\n        <select id="sel-display-mode-').concat(this.id,'" disabled>\n          <option value="1">Daily Takes</option>\n          <option value="2">Total Takes</option>\n        </select>\n      </div>\n      <div id="chart-div-').concat(this.id,'"></div>\n      <div id="table-div-').concat(this.id,'">\n        ').concat(e,"\n      </div>\n    </div>")}}]),e}(),ve=function(){function e(t){var a=this;ce(this,e),this.filterNum=function(e){a.num=parseInt($(e.target).val()),a.redrawFilteredQuizzes()},this.filterLanguage=function(e){a.language=$(e.target).val(),a.redrawFilteredQuizzes()},this.quizzes=t,this.language="all",this.num=25,this.id=v.a.getUniqueId(),$(".user-analytics-page").on("change","#sel-filter-language-"+this.id,this.filterLanguage),$(".user-analytics-page").on("change","#sel-filter-num-"+this.id,this.filterNum)}return de(e,[{key:"redrawFilteredQuizzes",value:function(){var e=fe(this.filterQuizzes());$("#filtered-quizzes-inner-"+this.id).html(e)}},{key:"getLanguages",value:function(e){var t,a={},n=[],r=se(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;a[o.language]||(a[o.language]=1,n.push(o.language))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"filterQuizzes",value:function(){var e=this,t="all"==this.language?this.quizzes:this.quizzes.filter((function(t){return t.language==e.language}));return t.sort((function(e,t){return e.timestaken==t.timestaken?v.a.normalizeWords(e.title)>v.a.normalizeWords(t.title)?1:-1:e.timestaken>t.timestaken?-1:1})),t.length>this.num&&-1!=this.num&&(t=t.slice(0,this.num)),t}},{key:"drawLanguageSelector",value:function(){var e=this.getLanguages(this.quizzes);if(e.length<2)return"";e.sort((function(e,t){return e==t?0:e<t?-1:1}));var t,a=[],n=se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=r.charAt(0).toUpperCase()+r.slice(1);a.push('<option value="'.concat(r,'">').concat(o,"</option>"))}}catch(e){n.e(e)}finally{n.f()}return'\n    <div>\n      <label>Language:</label>\n      <select id="sel-filter-language-'.concat(this.id,'">\n        <option value="all">All</option>\n        ').concat(a.join(""),"\n      </select>\n    </div>")}},{key:"drawNumSelector",value:function(e){if(e<=25)return"";var t=['<option value="25">25</option>'];return e>100&&t.push('<option value="100">100</option>'),t.push('<option value="-1">All</option>'),'\n    <div>\n      <label>Show:</label>\n      <select id="sel-filter-num-'.concat(this.id,'">\n        ').concat(t.join(""),"\n      </select>\n    </div>")}},{key:"draw",value:function(){if(0==this.quizzes.length)return"";var e=this.drawLanguageSelector(),t=this.filterQuizzes(),a=this.drawNumSelector(this.quizzes.length),n=fe(t);return'\n      <div class="filtered-quizzes" id="filtered-quizzes-'.concat(this.id,'">\n        <div class="header">Top Quizzes</div>\n        <div class="selector-controls">\n          ').concat(e,"\n          ").concat(a,'\n        </div>\n        <div id="filtered-quizzes-inner-').concat(this.id,'">\n          ').concat(n,"\n        </div>\n      </div>")}}]),e}();var me=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=t,this.map=new g(this.page)};function be(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ye(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function we(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ke=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.beforeUnload=function(){var e=window.location.href;history.replaceState({state:"dummyState"},"",e+"?mode="+a.mode+"&sortCol="+a.sortCol+"&sortDir="+a.sortDir+"&tag="+a.tag)},this.changeTag=function(e){var t=parseInt($(e.target).val());t!=a.tag&&(a.tag=t,a.draw())},this.clickMode=function(e){var t=$(e.target).data("mode");"selected"!=e.target.className&&($(".user-stat-modes .selected").removeClass("selected"),$(e.target).addClass("selected"),$("#sel-user-stat-mode").val(t),$("#sel-user-stat-mode").change(),a.mode=t,a.draw())},this.clickHeader=function(e){var t=$(e.target).closest("th").data("col");t==a.sortCol?a.sortDir*=-1:a.sortCol=t,a.sortQuizzes(),a.draw()},this.cmpUserStats=function(e,t){var n=a.getCmpForCol(e,a.sortCol),r=a.getCmpForCol(t,a.sortCol);return"-"==n&&(n=-1e4*a.sortDir),"-"==r&&(r=-1e4*a.sortDir),(n==r?e.idx>t.idx?-1:1:n>r?-1:1)*a.sortDir},this.page=t,this.sortDir=t.data.sortDir,this.sortCol=t.data.sortCol,this.mode=t.data.mode,this.tag=t.data.tag,this.quizzes=[];var n,r=be(this.page.data.quizzes);try{for(r.s();!(n=r.n()).done;){var o=n.value,i={title:o[0],sortTitle:v.a.normalizeString(o[0]),user:o[1],url:o[2],points:o[3],best:o[4],average:o[5],rating:o[6],timestaken:o[7],id:o[8],type:o[9],tags:o[10]};this.quizzes.push(i)}}catch(e){r.e(e)}finally{r.f()}this.sortQuizzes(),this.language=this.page.language;var s,l=be(this.quizzes);try{for(l.s();!(s=l.n()).done;){var c=s.value;0==c.tags.length&&c.tags.push(-1)}}catch(e){l.e(e)}finally{l.f()}this.preloadTableFilters(),this.draw(),$(".user-stat-table").on("click","th",this.clickHeader),$(".user-stat-modes").on("click","div",this.clickMode),$("#tag-selector").on("change",this.changeTag),$(window).bind("beforeunload",this.beforeUnload)}var t,a,n;return t=e,(a=[{key:"preloadTableFilters",value:function(){this.clickMode({target:$(".user-stat-modes div[data-mode='"+this.mode+"']")[0]})}},{key:"getCmpForCol",value:function(e,t){switch(t){case 0:return e.sortTitle;case 1:return e.points;case 2:return e.best;case 3:return e.average;case 4:return e.rating;case 5:return e.timestaken}}},{key:"sortQuizzes",value:function(){for(var e=0;e<this.quizzes.length;e++)this.quizzes[e].idx=e;this.quizzes.sort(this.cmpUserStats)}},{key:"drawRow",value:function(e){var t=v.a.getQuizUrl(e.user,e.url),a=-1==e.rating?"-":e.rating.toLocaleString(void 0,{minimumFractionDigits:2}),n="";return 4!=this.mode&&(n="\n        <td>".concat(e.points,"</td>\n        <td>").concat(e.best,"%</td>")),"\n      <tr>\n        <td><a href='".concat(t,"'>").concat(e.title,"</a></td>\n        ").concat(n,"\n        <td>").concat(e.average,"%</td>\n        <td>").concat(a,"</td>\n        <td>").concat(e.timestaken.toLocaleString(),"</td>\n      </tr>")}},{key:"drawHeader",value:function(){var e=[];return e.push("<tr>"),e.push(this.drawHeaderCell(o.a.translate("Quiz"),0)),4!=this.mode&&(e.push(this.drawHeaderCell(o.a.translate("Points"),1)),e.push(this.drawHeaderCell(o.a.translate("Best"),2))),e.push(this.drawHeaderCell(o.a.translate("Average"),3)),e.push(this.drawHeaderCell(o.a.translate("Rating"),4)),e.push(this.drawHeaderCell(o.a.translate("Takes"),5)),e.push("</tr>"),e.join("")}},{key:"drawHeaderCell",value:function(e,t){var a="";return this.sortCol==t&&(a=1==this.sortDir?'<i class="fa fa-chevron-down"></i>':'<i class="fa fa-chevron-up"></i>'),'<th data-col="'.concat(t,'">').concat(e).concat(a,"</th>")}},{key:"draw",value:function(){var e=[],t=0;e.push(this.drawHeader());for(var a=0;a<this.quizzes.length&&!(1==this.mode&&t>=500);a++)if(!(4==this.mode&&0!=this.quizzes[a].best||3==this.mode&&0==this.quizzes[a].best)){if(-2!=this.tag)if(this.tag<-5){if(this.quizzes[a].type!=this.getType(this.tag))continue}else if(!this.checkTag(a,this.tag))continue;e.push(this.drawRow(this.quizzes[a])),t+=1}e=e.join(""),0==t?$(".user-stat-table").html(o.a.translate("No quizzes found matching the selected criteria")):$(".user-stat-table").html('\n        <table class="standard-table">\n          '.concat(e,"\n        </table>"))}},{key:"getType",value:function(e){switch(e){case-10:return"m";case-11:return"mc";case-12:return"p";case-14:return"ts"}return"v"}},{key:"checkTag",value:function(e,t){return!!this.quizzes[e].tags.includes(t)}}])&&we(t.prototype,a),n&&we(t,n),e}();function $e(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return Ce(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ce(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw o}}}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Se(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ze=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.changeLanguage=function(e){var t=$(e.target).val();t!=a.language&&(a.language=t,a.draw())},this.changeType=function(e){var t=$(e.target).val();t!=a.type&&(a.type=t,a.draw())},this.changeCreator=function(e){var t=$(e.target).val();t!=a.creator&&(a.creator=t,a.draw())},this.changeNumToShow=function(e){var t=$(e.target).val();t!=a.numToShow&&(a.numToShow=t,a.draw())},this.clickHeader=function(e){var t=$(e.target).closest("th").data("col");t==a.sortCol?a.sortDirection*=-1:a.sortCol=t,a.sortQuizzes(),a.draw()},this.cmpUserStats=function(e,t){var n=a.getCmpForCol(e,a.sortCol),r=a.getCmpForCol(t,a.sortCol);return[3,4,5].includes(a.sortCol)&&("-"==n&&(n=-1e4*a.sortDirection),"-"==r&&(r=-1e4*a.sortDirection)),(n==r?e.idx>t.idx?-1:1:n>r?-1:1)*a.sortDirection},this.page=t,this.sortDirection=1,this.numToShow=$("#num-selector").val(),this.quizzes=[];var n,r=$e(JSON.parse(this.page.data.quizzes));try{for(r.s();!(n=r.n()).done;){var o=n.value;o.sortTitle=v.a.normalizeString(o.title),o.tags=[],o.best=Math.round(o.best/o.numquestions*100),0!=o.best?o.bestv="".concat(o.best,"%"):(o.best="-",o.bestv="-"),o.average=Math.round(o.averagescore/o.numquestions*100),this.quizzes.push(o)}}catch(e){r.e(e)}finally{r.f()}this.sortCol=1,this.sortQuizzes(),this.language=$("#lang-selector").val(),this.creator=$("#subs-selector").val(),this.type=$("#type-selector").val(),this.draw(),$(".user-stat-table").on("click","th",this.clickHeader),$("#lang-selector").on("change",this.changeLanguage),$("#type-selector").on("change",this.changeType),$("#subs-selector").on("change",this.changeCreator),$("#num-selector").on("change",this.changeNumToShow)}var t,a,n;return t=e,(a=[{key:"getCmpForCol",value:function(e,t){switch(t){case 0:return e.timestakenoverall;case 1:return e.sortdate;case 2:return e.sortTitle;case 3:return e.points;case 4:return e.rating;case 5:return e.best}}},{key:"sortQuizzes",value:function(){for(var e=0;e<this.quizzes.length;e++)this.quizzes[e].idx=e;this.quizzes.sort(this.cmpUserStats)}},{key:"drawRow",value:function(e){var t=v.a.getQuizUrl(e.user,e.url);return"\n      <tr>\n        <td>".concat(e.timestakenoverall.toLocaleString(),"</td>\n        <td>").concat(e.recentdate,"</td>\n        <td><a href='").concat(t,'\' target="_blank">').concat(e.title,"</a></td>\n        <td>").concat(e.points,"</td>\n        <td>").concat(e.rating,"</td>\n        <td>").concat(e.bestv,"</td>\n      </tr>")}},{key:"drawHeader",value:function(){var e=[];return e.push("<tr>"),e.push(this.drawHeaderCell("Takes",0)),e.push(this.drawHeaderCell("Date",1)),e.push(this.drawHeaderCell("Quiz",2)),e.push(this.drawHeaderCell("Points",3)),e.push(this.drawHeaderCell("Rating",4)),e.push(this.drawHeaderCell("Best",5)),e.push("</tr>"),e.join("")}},{key:"drawHeaderCell",value:function(e,t){var a="";return this.sortCol==t&&(a=1==this.sortDirection?'<i class="fa fa-chevron-down"></i>':'<i class="fa fa-chevron-up"></i>'),'<th data-col="'.concat(t,'">').concat(e).concat(a,"</th>")}},{key:"draw",value:function(){var e=[],t=0;e.push(this.drawHeader());for(var a=0;a<this.quizzes.length&&!(-1!=this.numToShow&&t>=this.numToShow);a++)0!=this.type&&this.quizzes[a].whatkind!=this.type||-1!=this.creator&&this.quizzes[a].user!=this.creator||"all"!=this.language&&this.quizzes[a].language!=this.language||(e.push(this.drawRow(this.quizzes[a])),t+=1);e=e.join(""),0==t?($(".standard-table").html("No quizzes found matching the selected criteria"),$("#two-col-bar").addClass("hidetwocol")):($(".standard-table").html("".concat(e)),$("#two-col-bar").removeClass("hidetwocol"))}}])&&Se(t.prototype,a),n&&Se(t,n),e}();function xe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Te=function(){function e(t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keydown=function(e){if(13==e.which)switch(e.target.id){case"txt-location":a.submitLocation();break;case"txt-real-name":a.submitRealName();break;case"txt-screen-name":a.submitScreenName();break;case"txt-email":a.submitEmail();break;case"txt-password-2":a.submitPassword()}},this.changeColorBlind=function(e){var t=$(e.target).val();s.a.go({url:"/api/user-actions.php",data:{action:"change-color-blind",colorblind:t},loading:"Changing color blind status...",callback:function(){}})},this.changeUserLanguage=function(e){var t=$(e.target).val();s.a.go({url:"/api/user-actions.php",data:{action:"change-user-lang",language:t},language:"Changing preferred user language...",callback:function(){location.reload()}})},this.showChangeLocation=function(){a.showChangeModal(o.a.translate("Change Your Location"),"txt-location",a.location,50,"btn-submit-location")},this.showChangeRealName=function(){a.showChangeModal(o.a.translate("Change Your Real Name"),"txt-real-name",a.realname,40,"btn-submit-real-name")},this.showChangeScreenName=function(){a.showChangeModal(o.a.translate("Change Your Screen Name"),"txt-screen-name",a.screenname,16,"btn-submit-screen-name")},this.showChangeEmail=function(){a.showChangeModal(o.a.translate("Change Your Email"),"txt-email",a.email,64,"btn-submit-email")},this.showChangePassword=function(){var e="\n      <p>\n        <label>".concat(o.a.translate("Password"),'</label>\n        <input type="password" id="txt-password-1" maxlength="32">\n      </p>\n      <p>\n        <label>').concat(o.a.translate("Confirm Password"),'</label>\n        <input type="password" id="txt-password-2" class="ya-submit-on-enter" maxlength="32">\n      </p>\n    '),t='<button class="blue" id="btn-submit-password">'.concat(o.a.translate("Submit Changes"),"</button>");i.a.alert(o.a.translate("Change Your Password"),e,null,{customFooter:t,customClass:"change-modal"})},this.submitLocation=function(){var e=$("#txt-location").val().trim();s.a.go({url:"/api/user-actions.php",data:{action:"change-location",location:e},loading:"Changing location...",callback:function(){i.a.close(),$(".change-location").text(e),a.location=e}})},this.submitRealName=function(){var e=$("#txt-real-name").val().trim();s.a.go({url:"/api/user-actions.php",data:{action:"change-real-name",realname:e},loading:"Changing real name...",callback:function(){i.a.close(),$(".change-real-name").text(e),a.realname=e}})},this.submitScreenName=function(){var e=$("#txt-screen-name").val().trim(),t=a.page.login.getUsernameError(e);t?i.a.alert("Error",t):s.a.go({url:"/api/user-actions.php",data:{action:"change-screen-name",screenname:e},loading:"Changing screen name...",callback:function(){i.a.close(),i.a.alert("Success","Your screen name has been changed"),$(".change-screen-name").text(e),a.screenname=e}})},this.submitEmail=function(){var e=$("#txt-email").val().trim(),t=a.page.login.getEmailError(e);t?i.a.alert("Error",t):s.a.go({url:"/api/user-actions.php",data:{action:"change-email",email:e},loading:"Changing e-mail address...",callback:function(){i.a.close(),i.a.alert("Success","Your e-mail has been changed"),a.email=e,$(".change-email").text(e)}})},this.submitPassword=function(){var e=$("#txt-password-1").val(),t=$("#txt-password-2").val(),n=a.page.login.getPasswordError(e,t);n?i.a.alert("Error",n):s.a.go({url:"/api/user-actions.php",data:{action:"change-password",password:e},loading:"Changing password",callback:function(){i.a.close(),i.a.alert("Success","Your password has been changed")}})},this.page=t,this.page.user&&(this.email=this.page.data.email,this.location=this.page.data.location,this.realname=this.page.data.realname,this.screenname=this.page.user.screenname,$(".change-location").on("click",this.showChangeLocation),$(".change-real-name").on("click",this.showChangeRealName),$(".change-screen-name").on("click",this.showChangeScreenName),$(".change-email").on("click",this.showChangeEmail),$(".change-password").on("click",this.showChangePassword),$("#sel-color-blind").on("change",this.changeColorBlind),$("#sel-user-lang").on("change",this.changeUserLanguage),$("body").on("click","#btn-submit-location",this.submitLocation),$("body").on("click","#btn-submit-real-name",this.submitRealName),$("body").on("click","#btn-submit-screen-name",this.submitScreenName),$("body").on("click","#btn-submit-email",this.submitEmail),$("body").on("click","#btn-submit-password",this.submitPassword),$("body").on("keydown",".ya-submit-on-enter",this.keydown))}var t,a,n;return t=e,(a=[{key:"showChangeModal",value:function(e,t,a,n,r){var s='<input type="text" id="'.concat(t,'" value="').concat(a,'" maxlength="').concat(n,'" class="ya-submit-on-enter">'),l='<button class="blue" id="'.concat(r,'">').concat(o.a.translate("Submit Changes"),"</button>");i.a.alert(e,s,null,{customFooter:l,customClass:"change-modal"})}}])&&xe(t.prototype,a),n&&xe(t,n),e}();a(35),$(document).ready((function(){var e=new n.a(_page);switch(e.pageType){case"chart":new r(e);break;case"contact":new l(e);break;case"copy-quizzes":new c(e);break;case"delete-account":new u(e);break;case"edit-countries-visited":new w(e);break;case"friend-add":new j(e);break;case"friend-index":new R(e);break;case"friend-invite":new M(e);break;case"group-invite":new I(e);break;case"group-add-member":new x(e);break;case"group-create":new T(e);break;case"group-page":new A(e);break;case"group-stats":new O(e);break;case"ignored-users":new F(e);break;case"info-page":new Y(e);break;case"jetpunk-premium":new H(e);break;case"manage-subscriptions":new G(e);break;case"place-dots":new V(e);break;case"reset-password":new J(e);break;case"svg-guide":new _(e);break;case"unsubscribe":new X(e);break;case"user-analytics":new pe(e);break;case"user-profile":new me(e);break;case"user-stats":new ke(e);break;case"user-subscriptions":new ze(e);break;case"your-account":new Te(e)}}))}]);